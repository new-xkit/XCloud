{"id":"shorten_posts","script":"//* TITLE Shorten Posts **//\r\n//* VERSION 0.1 REV H **//\r\n//* DESCRIPTION Makes scrolling easier **//\r\n//* DETAILS This extension shortens long posts, so if you are interested, you can just click on Show Full Post button to see it all, or scroll down if you are not interested. Useful for screens where long posts take a lot of space, and making it hard to scroll down.<br><br>By default, this extension only shortens text posts. You can toggle the setting to let it shorten the photo posts too. (This will 'cut off' long, vertical posts.) **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* FRAME false **//\r\n//* BETA false **//\r\n//* SLOW true **//\r\n\r\nXKit.extensions.shorten_posts = new Object({\r\n\r\n\trunning: false,\r\n\tslow: true,\r\n\r\n\theight_min: 200,\r\n\theight_max: 1500,\r\n\theight_default: 350,\r\n\r\n\tpreferences: {\r\n\t\tsep0: {\r\n\t\t\ttext: \"When to shorten posts\",\r\n\t\t\ttype: \"separator\"\r\n\t\t},\r\n\t\tonly_text: {\r\n\t\t\ttext: \"Only check and shorten text posts. (Turn off if you want to shorten photos too)\",\r\n\t\t\tdefault: true,\r\n\t\t\tvalue: true\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttext: \"Maximum post height (<a id=\\\"xkit-shorten-posts-height-help\\\" href=\\\"#\\\" onclick=\\\"return false\\\">what is this?</a>)\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tdefault: \"350\",\r\n\t\t\tvalue: \"350\"\r\n\t\t},\r\n\t\tsep1: {\r\n\t\t\ttext: \"Appearance and behaviour options\",\r\n\t\t\ttype: \"separator\"\r\n\t\t},\r\n\t\tdisplay_tags: {\r\n\t\t\ttext: \"Display the tags on shortened posts\",\r\n\t\t\tdefault: true,\r\n\t\t\tvalue: true\r\n\t\t},\r\n\t\tembiggen_on_click: {\r\n\t\t\ttext: \"Embiggen photo posts when I click on the thumbnail\",\r\n\t\t\tdefault: true,\r\n\t\t\tvalue: true\r\n\t\t}\r\n\t},\r\n\r\n\trun: function() {\r\n\r\n\t\tthis.running = true;\r\n\t\tXKit.extensions.shorten_posts.cpanel_check_height();\r\n\r\n\t\tif ($(\".post\").length > 0) {\r\n\t\t\tXKit.tools.init_css(\"shorten_posts\");\r\n\t\t\tif (typeof XKit.extensions.blacklist !== \"undefined\") {\r\n\t\t\t\tif (XKit.extensions.blacklist.running === true) {\r\n\t\t\t\t\tconsole.log(\" ------ BLACKLIST IS ON SHORTEN POSTS DELAY\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$(document).on(\"click\", \".xkit-shorten-posts-embiggen\", XKit.extensions.shorten_posts.embiggen);\r\n\t\t\tXKit.post_listener.add(\"shorten_posts\", XKit.extensions.shorten_posts.check);\r\n\t\t\tXKit.extensions.shorten_posts.check();\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcheck: function() {\r\n\r\n\t\tvar shortened_count = 0;\r\n\r\n\t\t$(\".post\").not(\".xkit-shorten-posts-done\").not(\".xkit-shorten-posts-embiggened\").each(function() {\r\n\r\n\t\t\tvar m_height = $(this).height();\r\n\t\t\t$(this).addClass(\"xkit-shorten-posts-done\");\r\n\r\n\t\t\tif ($(this).hasClass(\"xblacklist_blacklisted_post\")) { return; }\r\n\r\n\t\t\tif (XKit.extensions.shorten_posts.preferences.only_text.value === true) {\r\n\t\t\t\tif ($(this).hasClass(\"is_regular\") === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif ($(this).hasClass(\"is_regular\") === false && $(this).hasClass(\"is_photo\") === false\r\n\t\t\t\t\t&& $(this).hasClass(\"is_photoset\") === false && $(this).hasClass(\"is_link\") === false\r\n\t\t\t\t\t&& $(this).hasClass(\"is_quote\") === false && $(this).hasClass(\"is_conversation\") === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (m_height >= XKit.extensions.shorten_posts.preferences.height.value) {\r\n\t\t\t\tXKit.extensions.shorten_posts.short($(this), m_height);\r\n\t\t\t\tshortened_count++;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif (shortened_count > 0) {\r\n\r\n\t\t\t// Call Tumblr scroll helper update thingy.\r\n\t\t\tXKit.tools.add_function(function() {\r\n\t\t\t\tTumblr.Events.trigger(\"DOMEventor:updateRect\");\r\n\t\t\t}, true, \"\");\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tembiggen: function(e) {\r\n\r\n\t\tvar obj = e.target;\r\n\r\n\t\tif ($(obj).hasClass(\"image_thumbnail\") === true) {\r\n\t\t\tobj = $(obj).parentsUntil(\".post\").parent().find(\".xkit-shorten-posts-embiggen\");\r\n\t\t}\r\n\r\n\t\tvar m_height = $(obj).attr('data-old-height');\r\n\t\tvar post_div = $(obj).parent();\r\n\r\n\t\tvar m_speed = 200 + (m_height / 2);\r\n\r\n\t\tif (m_height < 320) {\r\n\t\t\tm_speed = 120;\r\n\t\t}\r\n\r\n  \t\t$(post_div).animate({\r\n    \t\t\theight: m_height\r\n  \t\t}, m_speed, function() {\r\n    \t\t\t$(this).find(\".xkit-shorten-posts-embiggen\").slideUp('fast');\r\n    \t\t\t$(this).removeClass(\"xkit-shorten-posts-shortened\");\r\n    \t\t\t$(this).removeClass(\"xkit-shorten-posts-shortened-show-tags\");\r\n    \t\t\t$(this).addClass(\"xkit-shorten-posts-embiggened\");\r\n    \t\t\t$(this).css('height','auto');\r\n  \t\t});\r\n\r\n\t},\r\n\r\n\tshort: function(obj, m_height) {\r\n\r\n\t\tif ($(obj).hasClass(\"xblacklist_blacklisted_post\")) { $(obj).removeClass(\"xkit-shorten-posts-shortened-show-tags\"); return; }\r\n\r\n\t\tvar post_id = $(obj).attr('data-post-id');\r\n\t\t$(obj).attr('data-old-height', m_height);\r\n\t\t$(obj).css('height',XKit.extensions.shorten_posts.preferences.height.value + \"px\");\r\n\t\t$(obj).addClass(\"xkit-shorten-posts-shortened\");\r\n\r\n\t\t$(obj).append(\"<div class=\\\"xkit-shorten-posts-embiggen xkit-shorten-posts-embiggen-for-post-\" + post_id + \"\\\" data-post-id=\\\"\" + post_id + \"\\\" data-old-height=\\\"\" + m_height + \"\\\">This post has been shortened. Click here to show the full post</div>\");\r\n\r\n\t\tif (XKit.extensions.shorten_posts.preferences.display_tags.value === true) {\r\n\t\t\t$(obj).addClass(\"xkit-shorten-posts-shortened-show-tags\");\r\n\t\t}\r\n\r\n\t\tif (XKit.extensions.shorten_posts.preferences.embiggen_on_click.value === true) {\r\n\t\t\t$(obj).find(\".image_thumbnail\").on(\"click\", XKit.extensions.shorten_posts.embiggen);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\r\n\t\tthis.running = false;\r\n\r\n\t\t// Remove all the stuff we've added.\r\n\t\t$(\".xkit-shorten-posts-embiggen\").remove();\r\n\r\n\t\t$(\".post.xkit-shorten-posts-shortened\").each(function() {\r\n\t\t\t$(this).css('height','auto');\r\n\t\t});\r\n\r\n\t\t$(\".xkit-shorten-posts-embiggen\").off(\"click\", XKit.extensions.shorten_posts.embiggen);\r\n\r\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-shortened\");\r\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-embiggened\");\r\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-shortened-show-tags\");\r\n\t\t$(\".post\").removeClass(\"xkit-shorten-posts-done\");\r\n\r\n\t\tXKit.tools.remove_css(\"shorten_posts\");\r\n\r\n\t\t// Call Tumblr scroll helper update thingy.\r\n\t\tXKit.tools.add_function(function() {\r\n\t\t\tTumblr.Events.trigger(\"DOMEventor:updateRect\");\r\n\t\t}, true, \"\");\r\n\r\n\t},\r\n\r\n\tcpanel_check_height: function() {\r\n\r\n\t\tif (isNaN(XKit.extensions.shorten_posts.preferences.height.value) === true) {\r\n\t\t\tXKit.console.add(\"Invalid post height check interval, reverting to default: not a number.\");\r\n\t\t\tXKit.extensions.shorten_posts.preferences.height.value = XKit.extensions.shorten_posts.height_default;\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tvar m_height = XKit.extensions.shorten_posts.preferences.height.value;\r\n\t\t\tif (m_height > XKit.extensions.shorten_posts.height_max || m_height < XKit.extensions.shorten_posts.height_min) {\r\n\t\t\t\tXKit.extensions.shorten_posts.preferences.height.value = XKit.extensions.shorten_posts.height_default;\r\n\t\t\t\tXKit.console.add(\"Invalid post height check interval, reverting to default: too small or big.\");\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tcpanel: function(div) {\r\n\r\n\t\t$(\"#xkit-shorten-posts-height-help\").click(function() {\r\n\r\n\t\t\tXKit.window.show(\"Maximum post height\", \"XKit will shorten posts longer than the height entered here.<br/><br/>The minimum value you can enter is <b>200</b>, and the maximum is <b>\" + XKit.extensions.shorten_posts.height_max + \"</b>. If you enter a value bigger or smaller than these, XKit will return to it's default value, which is 350 pixels.\",\"info\",\"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n});","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NENCNERBRkJEMTQ1MTFFMkIzMzlFNEI5QzIwNDI2MDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NENCNERBRkNEMTQ1MTFFMkIzMzlFNEI5QzIwNDI2MDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0Q0I0REFGOUQxNDUxMUUyQjMzOUU0QjlDMjA0MjYwMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0Q0I0REFGQUQxNDUxMUUyQjMzOUU0QjlDMjA0MjYwMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgyxgMQAAAaESURBVHjafFZbbJRF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","css":".xkit-shorten-posts-shortened .post_wrapper {\r\n\toverflow: hidden;\r\n\theight: 100%;\r\n}\r\n\r\n.xkit-shorten-posts-embiggen {\r\n\tposition: absolute;\r\n\tbottom: 0; left: 0;\r\n\twidth: 100%;\r\n\theight: 30px;\r\n\tline-height: 30px;\r\n\tbackground: rgb(230,230,230);\r\n\tbox-shadow: inset 0px 1px 2px rgba(0,0,0,0.22);\r\n\ttext-align: center;\r\n\tfont-size: 11px;\r\n\tfont-weight: bold;\r\n\ttext-shadow: 0px 1px 0px white;\r\n\tcolor: rgb(120,120,120);\r\n\tcursor: pointer;\r\n\tborder-radius: 0px 0px 5px 5px;\r\n\tborder-top: 1px solid rgba(0,0,0,0.33);\r\n\tz-index: 666;\r\n}\r\n\r\n.xkit-shorten-posts-embiggen:hover {\r\n\tbackground: rgb(245,245,245);\r\n\tcolor: rgb(100,100,100);\r\n}\r\n\r\n.xkit-shorten-posts-shortened-show-tags .post_tags {\r\n\tposition: absolute;\r\n\tbottom: 30px;\r\n\tleft: 0px;\r\n\twidth: 100%;\r\n\tpadding: 10px 20px;\r\n\tbackground: rgba(255,255,255,0.95);\r\n\tborder-top: 1px solid rgba(0,0,0,0.22);\r\n\tmargin-left: 0;\r\n}","title":"Shorten Posts","description":"Makes scrolling easier","developer":"STUDIOXENIX","version":"0.1 REV H","frame":"false","beta":"false","slow":"true","details":"This extension shortens long posts, so if you are interested, you can just click on Show Full Post button to see it all, or scroll down if you are not interested. Useful for screens where long posts take a lot of space, and making it hard to scroll down.<br><br>By default, this extension only shortens text posts. You can toggle the setting to let it shorten the photo posts too. (This will 'cut off' long, vertical posts.)","file":"found","server":"up","errors":false}