{"id":"postblock","script":"//* TITLE PostBlock **//\r\n//* VERSION 0.2 REV B **//\r\n//* DESCRIPTION Block the posts you don't like **//\r\n//* DETAILS This is an experimental extension that blocks posts you don't like on your dashboard. When you block a post, it will be hidden completely, including reblogs of it. **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* FRAME false **//\r\n//* SLOW true **//\r\n//* BETA false **//\r\n\r\nXKit.extensions.postblock = new Object({\r\n\r\n\trunning: false,\r\n\tslow: true,\r\n\tblacklisted: new Array(),\r\n\tbutton_icon: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0U0NTdGNzMwMjA1MTFFM0IwRTREQUE2OUI0ODg5QzAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0U0NTdGNzQwMjA1MTFFM0IwRTREQUE2OUI0ODg5QzAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDRTQ1N0Y3MTAyMDUxMUUzQjBFNERBQTY5QjQ4ODlDMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDRTQ1N0Y3MjAyMDUxMUUzQjBFNERBQTY5QjQ4ODlDMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PumfPHEAAACvSURBVHjaYmDAD44C8Q4GCoAlEFtA2f+hmGzwFYg/YTFsNRAvINUwZAPQ2f/waWQi0SJGahoGAw1AXECJNwkCFhLDEq+3Qd50B+IWIOZDU6hDpCXzkTkfobYuQPPafxxexiYON/AsUrRbkGkY3MBSJIEzZBiGAkSA+BsOxYQMQ8GgCHhDTjbBB1SA+DelLkM2cAI1DeMF4rvUMgwEdIH4ObUMAwEJaNn1lVTDAAIMAPLOnUicW2nyAAAAAElFTkSuQmCC\",\r\n\r\n\trun: function() {\r\n\t\tthis.running = true;\r\n\r\n\t\tif (XKit.interface.where().inbox === true) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tXKit.tools.add_css(\".postblock-cp { text-align: center; padding-top: 48px; } .postblock-cp small { color: rgb(128,128,128); }\", \"xkit-postblock-cp\");\r\n\r\n\t\tvar m_blacklist = XKit.storage.get(\"postblock\",\"posts\",\"\").split(\",\");\r\n\t\tif (m_blacklist !== \"\") {\r\n\t\t\tthis.blacklisted = m_blacklist;\r\n\t\t}\r\n\r\n\t\tconsole.log(\"total of \" + this.blacklisted.length + \" posts blocked\");\r\n\r\n\t\tif ($(\"#posts\").length > 0) {\r\n\t\t\t$(document).on('click','.xpostblockbutton', XKit.extensions.postblock.on_click);\r\n\t\t\tXKit.interface.create_control_button(\"xpostblockbutton\", this.button_icon, \"PostBlock\", \"\");\r\n\t\t\tXKit.post_listener.add(\"postblock\", XKit.extensions.postblock.do);\r\n\t\t\tXKit.extensions.postblock.do();\r\n\t\t}\r\n\t},\r\n\r\n\ton_click: function(e) {\r\n\r\n\t\tvar obj = e.target || e.srcElement;\r\n\t\tvar parent = $(obj).parentsUntil(\"#posts\");\r\n\r\n\t\tif (e.altKey) {\r\n\t\t\t$(parent).fadeOut('slow', function() {\r\n\t\t\t\t$(parent).remove();\r\n\t\t\t\tXKit.extensions.postblock.call_tumblr_resize();\r\n\t\t\t});\r\n\t\t\tif (XKit.extensions.postblock.blacklisted.indexOf($(obj).attr('data-root-id')) === -1) {\r\n\t\t\t\tXKit.extensions.postblock.blacklisted.push($(obj).attr('data-root-id'));\r\n\t\t\t\tXKit.storage.set(\"postblock\",\"posts\",XKit.extensions.postblock.blacklisted.join(\",\"));\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tXKit.window.show(\"Block this post?\",\"This post (including reblogs) will be blocked from your dashboard forever, without any indication that is was blocked.\",\"question\",\"<div class=\\\"xkit-button default\\\" id=\\\"xkit-post-block-ok\\\">Block Post</div><div class=\\\"xkit-button\\\" id=\\\"xkit-close-message\\\">Cancel</div>\");\r\n\r\n\t\t$(\"#xkit-post-block-ok\").click(function() {\r\n\r\n\t\t\tXKit.window.close();\r\n\t\t\t$(parent).fadeOut('slow', function() {\r\n\t\t\t\t$(parent).remove();\r\n\t\t\t\tXKit.extensions.postblock.call_tumblr_resize();\r\n\t\t\t});\r\n\t\t\tif (XKit.extensions.postblock.blacklisted.indexOf($(obj).attr('data-root-id')) === -1) {\r\n\t\t\t\tXKit.extensions.postblock.blacklisted.push($(obj).attr('data-root-id'));\r\n\t\t\t\tXKit.storage.set(\"postblock\",\"posts\",XKit.extensions.postblock.blacklisted.join(\",\"));\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\r\n\t},\r\n\r\n\tcall_tumblr_resize: function() {\r\n\r\n\t\tXKit.extensions.postblock.do();\r\n\r\n\t\tXKit.tools.add_function(function() {\r\n\t\t\tTumblr.Events.trigger(\"DOMEventor:updateRect\");\r\n\t\t}, true, \"\");\r\n\r\n\t},\r\n\r\n\tdo: function() {\r\n\r\n\t\tvar size_changed = false;\r\n\r\n\t\tvar posts = XKit.interface.get_posts(\"xpostblocked\");\r\n\r\n\t\t$(posts).each(function() {\r\n\r\n\t\t\t$(this).addClass(\"xpostblocked\");\r\n\r\n\t  \t\tvar m_post = XKit.interface.post($(this));\r\n\t  \t\tif (m_post.is_mine === true) { return; }\r\n\r\n\t\t\tif (XKit.extensions.postblock.blacklisted.indexOf(m_post.root_id) !== -1) {\r\n\t\t\t\t$(this).parent().remove();\r\n\t\t\t\tsize_changed = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar this_id = m_post.root_id;\r\n\t\t\tXKit.interface.add_control_button(this, \"xpostblockbutton\", \"data-root-id=\\\"\" + this_id + \"\\\"\");\r\n\r\n\t\t});\r\n\r\n\t\tif (size_changed) {\r\n\r\n\t\t\tXKit.extensions.postblock.call_tumblr_resize();\r\n\r\n\t\t}\r\n\r\n\t\treturn;\r\n\r\n\t\t$(\".post\").not(\".xpostblocked\").not(\".is_mine\").each(function() {\r\n\r\n\t\t\t$(this).addClass(\"xpostblocked\");\r\n\r\n\t\t\tthis_id = $(this).attr('data-root-id');\r\n\r\n\t\t\tif (XKit.extensions.postblock.blacklisted.indexOf(this_id) !== -1) {\r\n\t\t\t\t$(this).parent().remove();\r\n\t\t\t\tsize_changed = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tadd_html = '<div class=\"xpostblockbutton post_control\" data-root-id=\"' + this_id + '\"></div>';\r\n\r\n\t\t\tif ($(this).find('.post_controls').find('.like_button').length > 0) {\r\n\t\t\t\t$(this).find('.post_controls').prepend(add_html);\r\n\t\t\t} else {\r\n\t\t\t\t$(this).find('.post_controls_inner').prepend(add_html);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif (size_changed) {\r\n\r\n\t\t\tXKit.extensions.postblock.call_tumblr_resize();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcpanel: function(m_div) {\r\n\r\n\t\t$(m_div).html(\"<div class=\\\"postblock-cp\\\">You have <b id=\\\"xkit-postblock-cp-count\\\">\" + (XKit.extensions.postblock.blacklisted.length - 1) + \"</b> blocked posts.<div style=\\\"padding-top: 5px; padding-bottom: 5px;\\\">\" +\r\n\t\t\t\t\t\"<div class=\\\"xkit-button\\\" id=\\\"postblock-undo-last\\\">Unblock last blocked post</div></div><small>You need to refresh the page in order for previously blocked posts to appear again.</small></div>\");\r\n\r\n\t\tif ((XKit.extensions.postblock.blacklisted.length - 1) == 0) {\r\n\t\t\t$(\"#postblock-undo-last\").addClass(\"disabled\");\r\n\t\t}\r\n\r\n\t\t$(\"#postblock-undo-last\").click(function() {\r\n\r\n\t\t\tif ($(this).hasClass(\"disabled\")) { return; }\r\n\r\n\t\t\tXKit.extensions.postblock.blacklisted.pop();\r\n\t\t\tXKit.storage.set(\"postblock\",\"posts\",XKit.extensions.postblock.blacklisted.join(\",\"));\r\n\r\n\t\t\t$(\"#xkit-postblock-cp-count\").html((XKit.extensions.postblock.blacklisted.length - 1));\r\n\r\n\t\t\tif ((XKit.extensions.postblock.blacklisted.length - 1) == 0) {\r\n\t\t\t\t$(\"#postblock-undo-last\").addClass(\"disabled\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n\t\tXKit.post_listener.remove(\"postblock\");\r\n\t\t$(\".xpostblockbutton\").remove();\r\n\t}\r\n\r\n});","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUJCQjBGRjNFNjU5MTFFMkJEMTFFMTAzOUE3MTJBQkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUJCQjBGRjRFNjU5MTFFMkJEMTFFMTAzOUE3MTJBQkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1QkJCMEZGMUU2NTkxMUUyQkQxMUUxMDM5QTcxMkFCRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1QkJCMEZGMkU2NTkxMUUyQkQxMUUxMDM5QTcxMkFCRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ppl22eQAAAUGSURBVHjajFbPa11VED735vYm1mg3tVJxof4HKkGpVFqk1EURwRbEjSgWRDdCcVMXhWARtD9ArYtSBVGwQqPQCHaha4Vgrba4qTVNGrVIbTaxeXmemXHmmzk37UsIXnjv3XPeOd/MfPOzOjlxhiWxiH6lhI/gIUm6pY9+kf/LhL+Tbek7dvWk3hdbsLDf1U1dVwBoYk+/gWwyFFPXdt2OAkCBxdFNsO4bIJClHOOCg7UdsY80xIFs2jAk4C1BJF6SlA/Qk+qewmh7VFt2dBdAZJboMbVBuPHdoMXQzALcFXZdDSoVvYwvBhsMRkP5FOYLu/12njnrbwOtO3qcCF+Kk6UHTCVyZTmbeIDbGUjDcYKz2LGYQmlSC9yvnfeKLRTeggLsLiLAsV+IN3jLb4XFIs4YdKbGGUrOGlMxO0hl9yOno28fGB4e2fvqvkD3GBKnJCUHRSwsewPcNgnkusjk2hSOdHP614u6uO+B+6cvXYRsRCRLDfVAUCpqkHuIEINAMuENUfEBBEVEMeKQ+f0jB+u6euvwccSL3pdPP/pgXdvufvZF8zaUyc5UGGZKVIg3RiTUIJh9R0psO7qu+v2lXq/HqTzC58/98OPU9yWr9CCFwZnCx2oDke2bBdK4xkRF93AxUiVJKC7UWbAcPcuJy+AbGe/xCQcRnNC4oxzdIxYRhyzjgktcJHGxRL79ZnJkZP3Ylsfdm3aYw5+wLQGGm4ykiVpRwUvuhJKoHiPlRU58fEr/mrv6166n9+ScFxZumK5c0hLM2xIhrYAN2IhSQPBLF3MFNnWSFOql53enm57940c9nJBL+ptRCuFRJFxtepKJzhZfJu6XCz9/fXqit3ijo+jP36/4S5853fqoFl99eVKxsvmWK2WGwmjYoj7QLVROZKrp/cmHx3q9xfn5a3uee8FR3n1nvCNrQICSdv7clMbgzl3PWAVn5GnB00Vd6iWKGhx89+bNunN26ruZy5fSoMK8YscUvvDT2TOTp6IYeiypttl811AirzfGD/w79shjM9O/6ZHJic8G0GiFBRrxh987off/WVi8Pj/PHkgmJ6Ky8YqJUuaC5OGxR09/8Xm/35+7MjNISBoUcOjg/u79lX0HkCqoGgpb2fka3dH8TFyaUt1u2bo9rfbISopupcujG4S7l6lOyA8jjH1Hcqat23bUQ0OrIEheAx/xSlabvI3YimsqlcEz233e3ja67Ymdq+m4lgHi3Sk5R1F46uQMlV6MLkSZ8o4nn9p416YVLl1LgpoeDd7rW/5X32tyD1izoRhT4Mmlpf7el1+7c8OGgahf2wK0DEY9jWJQS/QG1NwyFGnnzSTt+ttff2P8wYfG2rb9PwKST0TMGj5V8r6YqjePHE/oDBIdwmsbCknmoaH6jtHR4Xad59js7B/33rMpeiSVMcxLfZLpy7O8PMBE220k5jrA+0EJV+hvn/rXrv8tPq0gDWfnrpKVG0QGqm9JLk6lJ0dvhfQGqpXiHHK9IfsAw93I4KNJQmuRm/pNDIH6d1ZGKrffKUC55pg3JBLBpwqKuQ7DjpcELk0tNKxcNa7KDBX9vwxgGEOl8Zps9nMXYBgRGYXdG2cMbyjwzMVGu1DFaNFVnDLhxdxCOpuaKpqh4iOtrkxWFUOJQVTBbzfvlPkqerOHYIqmGO0P6JiLYqIBrP6NIdFdHg5P4fGYl2A7iEcPk64EdrOX16Sw/D8BBgAd8iES5BLqkgAAAABJRU5ErkJggg==","title":"PostBlock","description":"Block the posts you don't like","developer":"STUDIOXENIX","version":"0.2 REV B","frame":"false","beta":"false","slow":"true","details":"This is an experimental extension that blocks posts you don't like on your dashboard. When you block a post, it will be hidden completely, including reblogs of it.","file":"found","server":"up","errors":false}