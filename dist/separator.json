{"id":"separator","script":"//* TITLE Separator **//\r\n//* VERSION 1.1.0 **//\r\n//* DESCRIPTION Where were we again? **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* DETAILS A simple extension that puts a divider showing where you left off on your dashboard. **//\r\n//* FRAME false **//\r\n//* BETA false **//\r\n\r\nXKit.extensions.separator = new Object({\r\n\r\n\trunning: false,\r\n\r\n\tcheck_for: \"\",\r\n\r\n\tpreferences: {\r\n\r\n\t\t\"bold_line\": {\r\n\t\t\ttext: \"Use the thick line for separating\",\r\n\t\t\tdefault: false,\r\n\t\t\tvalue: false\r\n\t\t},\r\n\r\n\t\t\"jump_to\": {\r\n\t\t\ttext: \"Show the \\\"Jump to Separator\\\" button (only works when endless scrolling is off)\",\r\n\t\t\tdefault: false,\r\n\t\t\tvalue: false\r\n\t\t},\r\n\r\n\t},\r\n\r\n\trun: function() {\r\n\t\tthis.running = true;\r\n\r\n\t\tif (XKit.interface.where().dashboard !== true) {return; }\r\n\r\n\t\tXKit.tools.init_css(\"separator\");\r\n\r\n\t\tif (XKit.extensions.separator.preferences.bold_line.value === true) {\r\n\r\n\t\t\tXKit.tools.add_css(\" #xkit-post-separator { border-top: 3px solid rgba(255,255,255,0.33) !important; border-bottom: 0 !important; } \", \"separator-thick\");\r\n\r\n\t\t}\r\n\r\n\t\tif (XKit.extensions.separator.preferences.jump_to.value === true) {\r\n\r\n\t\t\tdo_continue = false;\r\n\t\t\tif (typeof XKit.interface.where().endless !== \"undefined\") {\r\n\t\t\t\tif (XKit.interface.where().endless === false) {\r\n\t\t\t\t\tdo_continue = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\txf_html = '<ul class=\"controls_section\" id=\"separator_ul\">' +\r\n\t\t\t\t'<li class=\"section_header selected\">SEPARATOR</li>' +\r\n\t\t\t\t'<li class=\"no_push\" style=\"height: 36px;\"><a href=\"#\" onclick=\"return false;\" id=\"separator_button\">' +\r\n\t\t\t\t\t'<div class=\"hide_overflow\" style=\"color: rgba(255, 255, 255, 0.5) !important; font-weight: bold; padding-left: 10px; padding-top: 8px;\">Go to last viewed post<span class=\"sub_control link_arrow arrow_right\"></span></div>' +\r\n\t\t\t\t'</a></li></ul>';\r\n\t\t\t$(\"ul.controls_section:first\").before(xf_html);\r\n\r\n\r\n\t\t\t$(\"#separator_button\").click(function() {\r\n\r\n\t\t\t\tif ($(\"#xkit-post-separator\").length > 0) {\r\n\r\n\t\t\t\t\t$('html,body').animate({\r\n   \t\t\t\t\t\tscrollTop: $(\"#xkit-post-separator\").offset().top\r\n\t\t\t\t\t}, 1000);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdocument.location = \"http://www.tumblr.com/dashboard/100/\" + (XKit.extensions.separator.check_for + 1);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tvar last_loaded_post = XKit.storage.get(\"separator\",\"last_post\",\"\");\r\n\r\n\t\tvar current_last_post = $(\"body\").find(\".post\").not(\"#tumblr_radar\").not(\".new_post_buttons\").first();\r\n\r\n\t\t//$(last_loaded_post).css(\"background\",\"red\");\r\n\r\n\t\tif (last_loaded_post !== \"\") {\r\n\r\n\t\t\tXKit.extensions.separator.check_for = last_loaded_post;\r\n\r\n\t\t\tif ($(\"#post_\" + last_loaded_post).length > 0) {\r\n\r\n\t\t\t\tXKit.extensions.separator.insert($(\"#post_\" + last_loaded_post));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Is it deleted?\r\n\t\t\t\tif (XKit.extensions.separator.check_if_passed() === true) {\r\n\r\n\t\t\t\t\tvar find_closest = true;\r\n\r\n\t\t\t\t\tif (typeof XKit.interface.where().endless !== \"undefined\") {\r\n\t\t\t\t\t\tif (XKit.interface.where().endless === false) {\r\n\t\t\t\t\t\t\tfind_closest = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (find_closest) {\r\n\t\t\t\t\t\tXKit.extensions.separator.find_closest(100);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar current_last = $(\".post\").first();\r\n\t\t\t\t\t\tcurrent_last_id = $(current_last).attr('data-post-id');\r\n\t\t\t\t\t\tif (current_last_id < XKit.extensions.separator.check_for) {\r\n\t\t\t\t\t\t\tXKit.extensions.separator.find_closest(100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// Probably after scrolling.\r\n\t\t\t\t\tXKit.post_listener.add(\"separator\", XKit.extensions.separator.post_listener);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tXKit.storage.set(\"separator\",\"last_post\",$(current_last_post).attr('data-post-id'));\r\n\r\n\t},\r\n\r\n\tfind_closest: function(distance) {\r\n\r\n\t\tvar found_post = false;\r\n\r\n\t\tif (distance >= 5000000000) { return; }\r\n\r\n\t\t$(\".post\").not(\"#new_post\").each(function() {\r\n\r\n\t\t\tvar m_id = $(this).attr('data-post-id');\r\n\r\n\t\t\tif (m_id >= XKit.extensions.separator.check_for - distance && m_id <= XKit.extensions.separator.check_for + distance) {\r\n\r\n\t\t\t\tXKit.extensions.separator.insert($(this));\r\n\t\t\t\tfound_post = true;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Just in case.\r\n\t\t\t\t\tXKit.post_listener.remove(\"separator\");\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.log(\"Unable to remove separator post listener.\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif (found_post) { return; }\r\n\r\n\t\tXKit.extensions.separator.find_closest(distance * 5);\r\n\r\n\r\n\t},\r\n\r\n\tcheck_if_passed: function() {\r\n\r\n\t\tvar current_last = $(\".post\").last();\r\n\t\tcurrent_last_id = $(current_last).attr('data-post-id');\r\n\r\n\t\t// alert(\"checking for: \" + XKit.extensions.separator.check_for + \"\\n\\n\" + \"current last: \" + current_last_id);\r\n\r\n\t\tif (current_last_id < XKit.extensions.separator.check_for) {\r\n\r\n\t\t\t// We scrolled way too much but still there is no post.\r\n\t\t\treturn true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tpost_listener: function() {\r\n\r\n\t\tif ($(\"#post_\" + XKit.extensions.separator.check_for).length > 0) {\r\n\r\n\t\t\tXKit.extensions.separator.insert($(\"#post_\" + XKit.extensions.separator.check_for));\r\n\t\t\tXKit.post_listener.remove(\"separator\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// It was probably deleted? Let's check for that.\r\n\t\t\tXKit.extensions.separator.find_closest(100);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tinsert: function(div) {\r\n\r\n\t\t$(div).parent().before(\"<div id=\\\"xkit-post-separator\\\">Here!</div>\");\r\n\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n\t\t$(\"#xkit-post-separator\").remove();\r\n\t\tXKit.post_listener.remove(\"separator\");\r\n\t\tXKit.tools.remove_css(\"separator\");\r\n\t\tXKit.tools.remove_css(\"separator-thick\");\r\n\t}\r\n\r\n});\r\n","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNTEwQjYxNzRGNzExMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNTEwQjYxNjRGNzExMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MT3W1AAAAMdJREFUeNrsmcENhDAMBGOSH5XQw304iXJpAT70cNWccldAHkgIOYuHCjzaXdsxto41KX/FBun6k3j5fwWSAeAMIG6iYkaIyUBoC+mHGAuhQHgLZboQ74HYAFiINnoRYMhYiBAHnwPyqwTLHArcoMDne3RY65RfZ7uQ1R51aZe6zY3/A/PWo1v2t/ogayqwL/WBIZYCkD+roIA3QGGVcH5SogBzAAUAAOBSBjireANwmQOAEGMh33WaQYaFogOQASwU20I/AQYAj6wNUn2YSRcAAAAASUVORK5CYII=","css":"#xkit-post-separator {\r\n\r\n\tborder-top: 1px dotted rgba(0,0,0,0.33);\r\n\tborder-bottom: 1px dotted rgba(255,255,255,0.23);\r\n\theight: 0px;\r\n\toverflow: hidden;\r\n\tmargin-top: 10px;\r\n\tmargin-bottom: 20px;\r\n\r\n}\r\n\r\n#separator_button:after {\r\n\tbackground: no-repeat 0px 45% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzQ4N0RDNkY1NkU3MTFFMzgzRUQ4QkE5QkZCQjAwMUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzQ4N0RDNzA1NkU3MTFFMzgzRUQ4QkE5QkZCQjAwMUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNDg3REM2RDU2RTcxMUUzODNFRDhCQTlCRkJCMDAxRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNDg3REM2RTU2RTcxMUUzODNFRDhCQTlCRkJCMDAxRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu2Dx7AAAACYSURBVHjaYvz//z8DtQATAxUBCwV6s5HYU6nuMroZxgvEdkDMTC2X6QJxMBDzkRoBDmhyrFBaFIjDgXgvEN8j1jBtPOrYgNgTiC8D8VEg/kuNCAB52x+IGalh2AcgPgDE/ylNtLegBv0mJsymYkkacdDwOQzEVynNTp+AeAcQv6Y0b/4A4pVA/IsaGf33gOZNxkFbOAIEGADwrRznI17V9AAAAABJRU5ErkJggg==) !important;\r\n\tcontent: \"\\54\";\r\n\tfont-size: 0;\r\n\tline-height: 37px;\r\n\twidth: 20px;\r\n}","title":"Separator","description":"Where were we again?","developer":"STUDIOXENIX","version":"1.1.0","frame":"false","beta":"false","details":"A simple extension that puts a divider showing where you left off on your dashboard.","file":"found","server":"up","errors":false,"slow":"false"}