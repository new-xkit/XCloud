{"id":"profiler","script":"//* TITLE Profiler **//\r\n//* VERSION 1.2 REV C **//\r\n//* DESCRIPTION The User Inspection Gadget **//\r\n//* DETAILS Select Profiler option from the User Menu to see information such as when they started blogging, how many posts they have, timezone, and more.<br><br>Requires User Menus+ to be installed. **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* FRAME false **//\r\n//* BETA false **//\r\n\r\nXKit.extensions.profiler = new Object({\r\n\r\n\trunning: false,\r\n\r\n\tapiKey: \"fuiKNFp9vQFvjLNvx4sUwti4Yb5yGutBN4Xh10LXZhhRKjWlV4\",\r\n\r\n\tpreferences: {\r\n\t\t\"show_nicknames\": {\r\n\t\t\ttext: \"Show Nicknames / Descriptions on Dashboard\",\r\n\t\t\tdefault: true,\r\n\t\t\tvalue: true,\r\n\t\t\tslow: true\r\n\t\t}\r\n\t},\r\n\r\n\r\n\tframe_run: function() {\r\n\r\n\t\tXKit.tools.init_css(\"profiler\");\r\n\r\n\t\tvar m_css = \t\"#iframe_controls { width: auto !important; } \" +\r\n\t\t\t\t\"#xkit_profiler_inblog_button:before {\" +\r\n\t\t\t\t\t\" background-size: auto; \" +\r\n\t\t\t\t\t\" background-position: 50% 50%; \" +\r\n\t\t\t\t\t\" background-repeat: no-repeat; \" +\r\n\t\t\t\t\t\" background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjEzRkZBMkE2Q0QzMTFFMzlDNTZCMzI0NDhERkFFOUQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjEzRkZBMkI2Q0QzMTFFMzlDNTZCMzI0NDhERkFFOUQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2MTNGRkEyODZDRDMxMUUzOUM1NkIzMjQ0OERGQUU5RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2MTNGRkEyOTZDRDMxMUUzOUM1NkIzMjQ0OERGQUU5RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptc21PYAAACFSURBVHjaYvz//z8DOYAFjS8LxMFA7A7ExlCxs0C8E4jXAvFjuEqQjVBsCcQb/uMGG6BqwOphmmTRNSEZjK5ZFlljAbrxODT+h6plYILKu6N7Ht0AJOCO7MdXJNj4CtlGkgETUpATC84ia9xJgsadyH4kOzpITgCMaCFOdJJjJDeRAwQYAEACMSh3yj0GAAAAAElFTkSuQmCC); \" +\r\n\t\t\t\t\"}\";\r\n\r\n\t\tXKit.tools.add_css(m_css, \"profiler_in_blog\");\r\n\r\n\t\tvar m_html = \t\"<a id=\\\"xkit_profiler_inblog_button\\\" onclick=\\\"return false\\\" class=\\\"btn icon reblog no_label\\\">Profiler</a>\";\r\n\r\n\t\t$(\".btn.dashboard\").before(m_html);\r\n\r\n\t\t$(\"#xkit_profiler_inblog_button\").click(function() {\r\n\r\n\t\t\tvar blog_url = $(\"#tumblelog_name\").attr('data-tumblelog-name');\r\n\r\n\t\t\tXKit.iframe.full();\r\n\r\n\t\t\tXKit.extensions.profiler.show(blog_url, true);\r\n\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tadd_nicks: function() {\r\n\r\n\t\tif ($(\".follower\").length > 0) {\r\n\r\n\t\t\t$(\".follower\").each(function() {\r\n\r\n\t\t\t\tvar m_url = $(this).find(\".name\").text();\r\n\t\t\t\tvar m_storage = XKit.storage.get(\"profiler\",\"nick-for--\" + m_url, \"\");\r\n\t\t\t\tif (m_storage === \"\") { return; }\r\n\r\n\t\t\t\t$(this).find(\".name\").append(\"<div class=\\\"xkit-profiler-nickname-inline\\\">(\" + m_storage + \")</div>\");\r\n\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tvar posts = XKit.interface.get_posts(\"profiler-nicknamed\");\r\n\r\n\t\t$(posts).each(function() {\r\n\r\n\t\t\t$(this).addClass(\"profiler-nicknamed\");\r\n\r\n\t  \t\tvar m_post = XKit.interface.post($(this));\r\n\r\n\t  \t\tif (XKit.interface.where().inbox !== true) {\r\n\t  \t\t\tif (m_post.is_mine === true) { return; }\r\n\t  \t\t}\r\n\r\n\t  \t\t// console.log(m_post);\r\n\r\n\t  \t\tvar post_owner = m_post.owner;\r\n\r\n\t  \t\tif (m_post.type === \"note\" && XKit.interface.where().inbox === true) {\r\n\t  \t\t\tvar m_json_info = $(this).find(\".post_avatar_link\").attr('data-tumblelog-popover');\r\n\t  \t\t\ttry {\r\n\t  \t\t\t\tvar m_json_obj = JSON.parse(m_json_info);\r\n\t  \t\t\t\tpost_owner = m_json_obj.name;\r\n\t  \t\t\t} catch(e) {\r\n\t  \t\t\t\treturn;\r\n\t  \t\t\t}\r\n\t  \t\t}\r\n\r\n\t  \t\tvar m_storage = XKit.storage.get(\"profiler\",\"nick-for--\" + post_owner, \"\");\r\n\r\n\t  \t\tif (m_storage === \"\") { return; }\r\n\r\n\t  \t\tvar name_div_container;\r\n\t  \t\tvar name_div;\r\n\r\n\t  \t\tif ($(this).find(\".post_info_fence\").length > 0) {\r\n\t  \t\t\tname_div_container = $(this).find(\".post_info_fence\");\r\n\t  \t\t} else {\r\n\t  \t\t\tname_div_container = $(this).find(\".post_info\");\r\n\t  \t\t}\r\n\r\n\t  \t\tif (name_div_container.find(\"a\").length > 0) {\r\n\t  \t\t\tname_div = name_div_container.find(\"a\").first();\r\n\t  \t\t\t$(name_div).after(\"<span class=\\\"xkit-profiler-nickname\\\">(\" + m_storage + \")</div>\");\r\n\t  \t\t} else {\r\n\t  \t\t\tname_div = name_div_container;\r\n\t  \t\t\t$(name_div).append(\"<span class=\\\"xkit-profiler-nickname\\\">(\" + m_storage + \")</div>\");\r\n\t  \t\t}\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tredo_nicks: function() {\r\n\r\n\t\t$(\".xkit-profiler-nickname-inline\").remove();\r\n\t\t$(\".post .xkit-profiler-nickname\").remove();\r\n\t\t$(\".post.profiler-nicknamed\").removeClass(\"profiler-nicknamed\");\r\n\t\tXKit.extensions.profiler.add_nicks();\r\n\r\n\t},\r\n\r\n\trun: function() {\r\n\t\tthis.running = true;\r\n\r\n\t\tXKit.tools.init_css(\"profiler\");\r\n\t\t//XKit.extensions.profiler.show(\"xenixlet\");\r\n\r\n\t\tif (XKit.extensions.profiler.preferences.show_nicknames.value === true) {\r\n\r\n\t\t\tXKit.post_listener.add(\"profiler\", XKit.extensions.profiler.add_nicks);\r\n\t\t\tXKit.extensions.profiler.add_nicks();\r\n\r\n\t\t}\r\n\r\n\t\tif (typeof XKit.extensions.show_more === \"undefined\") {\r\n\t\t\tXKit.extensions.profiler.show_ump_error();\r\n\t\t\treturn;\r\n\t\t} else {\r\n\r\n\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\tif (XKit.extensions.show_more.running !== true) {\r\n\t\t\t\t\tXKit.extensions.profiler.show_ump_error();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\r\n                \t\t\tif (XKit.extensions.show_more.preferences.use_classic_menu.value === true) {\r\n\r\n                \t\t\t\tXKit.extensions.show_more.add_custom_menu(\"profiler\", function(data) {\r\n\r\n                \t\t\t\t\tconsole.log(data);\r\n                \t\t\t\t\tvar user_url = data.name;\r\n\r\n\t\t\t\t\t\t\t$(document).off(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\r\n\t\t\t\t\t\t\t$(document).on(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\r\n\r\n\t\t\t\t\t\t\treturn \"<div data-url=\\\"\" + user_url + \"\\\" class=\\\"xkit-profiler-button-\" + user_url + \" xkit-profiler\\\">Profiler</div>\";\r\n\r\n                \t\t\t\t});\r\n\r\n                \t\t\t} else {\r\n\r\n                \t\t\t\tXKit.extensions.show_more.add_custom_menu(\"profiler\", function(data) {\r\n\r\n                \t\t\t\t\tconsole.log(\"******************************\");\r\n                \t\t\t\t\tconsole.log(data);\r\n                \t\t\t\t\tconsole.log(\"******************************\");\r\n                \t\t\t\t\tvar user_url = data.name;\r\n\r\n\t\t\t\t\t\t\t$(document).off(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\r\n\t\t\t\t\t\t\t$(document).on(\"click\", \".xkit-profiler-button-\" + user_url, XKit.extensions.profiler.menu_clicked);\r\n\r\n\t\t\t\t\t\t\treturn \"<li>\" +\r\n                \t\t\t\t\t\t\"<a data-url=\\\"\" + user_url + \"\\\" class=\\\"xkit-profiler-button-\" + user_url + \" xkit-profiler xkit-new-menu-fix\\\">\" +\r\n                \t\t\t\t\t\t\t\"<span class=\\\"hide_overflow\\\">Profiler</span>\" +\r\n                \t\t\t\t\t\t\"</a>\" +\r\n                \t\t\t \t\t \"</li>\";\r\n\r\n                \t\t\t\t});\r\n\r\n                \t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, 2000);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmenu_clicked: function(e) {\r\n\r\n\t\tvar m_object = $(e.target);\r\n\r\n\t\tif (!m_object.hasClass(\"xkit-profiler\")) {\r\n\r\n\t\t\twhile (!m_object.hasClass(\"xkit-profiler\")) {\r\n\t\t\t\tm_object = m_object.parent();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t$(\".tumblelog_popover_glass\").trigger('click');\r\n\t\tsetTimeout(function() { $(\".tumblelog_popover_glass\").trigger('click'); }, 10);\r\n\t\t$(\".popover\").hide();\r\n\t\tXKit.extensions.show_more.hide_classic_menu();\r\n\r\n\t\tvar user_url = $(m_object).attr('data-url');\r\n\r\n\t\tXKit.extensions.profiler.show(user_url);\r\n\r\n\t},\r\n\r\n\twindow_id: \"\",\r\n\r\n\tis_inframe: false,\r\n\r\n\tshow: function(user_url, inframe) {\r\n\r\n\t\tXKit.extensions.profiler.is_inframe = inframe;\r\n\r\n\t\tvar m_window_id = XKit.tools.random_string();\r\n\t\tXKit.extensions.profiler.window_id = m_window_id;\r\n\r\n\t\tvar m_html = \t\"<div id=\\\"xkit-profiler-contents\\\" class=\\\"nano\\\">\" +\r\n\t\t\t\t\t\"<div id=\\\"xkit-profiler-main\\\" class=\\\"content\\\">\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line separator\\\">\" +\r\n\t\t\t\t\t\t\t\"Blog Information\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Title\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-title\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Nickname / Description\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-nickname\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Is NSFW/Adult blog?\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-nsfw\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Is Following You?\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-is-following\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Last Update\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-last-update\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line separator\\\">\" +\r\n\t\t\t\t\t\t\t\"Other\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Blogging Since\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-since\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Timezone\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-timezone\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Custom Domain?\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-custom-domain\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Shares liked posts?\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-is-sharing-likes\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line separator\\\">\" +\r\n\t\t\t\t\t\t\t\"Posts\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Total Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-total\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Text Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-text\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Photo / Photoset Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-photo\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Chat Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-chat\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Quote Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-quote\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Audio Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-audio\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\t\"<div class=\\\"xkit-profiler-line\\\">\" +\r\n\t\t\t\t\t\t\t\"Video Posts\" +\r\n\t\t\t\t\t\t\t\"<div id=\\\"xkit-profiler-video\\\"></div>\" +\r\n\t\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\"</div>\";\r\n\r\n\t\tXKit.window.show(\"Profiler for \" + user_url, m_html, \"info\", \"<div id=\\\"xkit-profiler-close\\\" class=\\\"xkit-button default\\\">Close Window</div><div id=\\\"xkit-profiler-rename\\\" class=\\\"xkit-button\\\">Rename Person</div>\");\r\n\r\n\t\t$(\".xkit-profiler-line div\").addClass(\"loading-up\");\r\n\r\n\t\t$(\"#xkit-profiler-contents\").nanoScroller();\r\n\t\t$(\"#xkit-profiler-contents\").nanoScroller({ scroll: 'top' });\r\n\r\n\t\t$(\"body\").css(\"overflow\",\"hidden\");\r\n\r\n\t\t$(\"#xkit-profiler-close\").click(function() {\r\n\r\n\t\t\t$(\"body\").css(\"overflow\",\"auto\");\r\n\t\t\tXKit.window.close();\r\n\r\n\t\t\tif (XKit.extensions.profiler.is_inframe === true) {\r\n\t\t\t\tsetTimeout(function() { XKit.iframe.restore();\t}, 300);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\t$(\"#xkit-profiler-rename\").click(function() {\r\n\r\n\t\t\tvar new_name = prompt(\"Enter a nickname/title/description for this person\");\r\n\r\n\t\t\tif (new_name !== null) {\r\n\t\t\t\tXKit.storage.set(\"profiler\",\"nick-for--\" + user_url, new_name);\r\n\t\t\t\t$(\"#xkit-profiler-nickname\").removeClass(\"loading-up\").html(new_name);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"Nothing entered.\");\r\n\t\t\t}\r\n\r\n\t\t\tXKit.extensions.profiler.redo_nicks();\r\n\r\n\t\t});\r\n\r\n\t\tvar m_nickname = XKit.storage.get(\"profiler\",\"nick-for--\" + user_url, \"\");\r\n\t\tif (m_nickname === \"\") {\r\n\t\t\t$(\"#xkit-profiler-nickname\").removeClass(\"loading-up\").html(\"Not set\");\r\n\t\t} else {\r\n\t\t\t$(\"#xkit-profiler-nickname\").removeClass(\"loading-up\").html(m_nickname);\r\n\t\t}\r\n\r\n\t\tvar m_blogs = XKit.tools.get_blogs();\r\n\t\tfor(i=0;i<m_blogs.length;i++) {\r\n\t\t\tif (m_blogs[i] !== \"\") {\r\n\t\t\t\tblog_id = m_blogs[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl: \"/svc/tumblelog/followed_by\",\r\n\t\t\tdata: \"tumblelog=\" + blog_id + \"&query=\" + user_url,\r\n\t\t\tdataType: \"text\",\r\n\t\t}).done(function( msg ) {\r\n\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\r\n\t\t\ttry {\r\n\t\t\t\tmsg = JSON.parse(msg);\r\n\t\t\t\tif (msg.response.is_friend === 1) {\r\n\t\t\t\t\t$(\"#xkit-profiler-is-following\").removeClass(\"loading-up\").html(\"Yes\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(\"#xkit-profiler-is-following\").removeClass(\"loading-up\").html(\"No\");\r\n\t\t\t\t}\r\n\t\t\t} catch(e){\r\n\t\t\t\tconsole.log(\"Profiler: \" + e.message);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar api_url = \"https://api.tumblr.com/v2/blog/\" + user_url + \".tumblr.com/info\" + \"?api_key=\" + XKit.extensions.profiler.apiKey;\r\n\r\n\t\tGM_xmlhttpRequest({\r\n\t\t\tmethod: \"GET\",\r\n\t\t\turl: api_url,\r\n\t\t\tjson: true,\r\n\t\t\tonerror: function(response) {\r\n\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tonload: function(response) {\r\n\r\n\t\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\r\n\r\n\t\t\t\tvar data = JSON.parse(response.responseText).response\r\n\t\t\t\tvar dtx = new Date(data.blog.updated * 1000);\r\n\t\t\t\tvar dt = moment(dtx);\r\n\r\n\t\t\t\t$(\"#xkit-profiler-last-update\").removeClass(\"loading-up\").html(dt.from(new Date()));\r\n\t\t\t\t$(\"#xkit-profiler-total\").removeClass(\"loading-up\").html(data.blog.posts);\r\n\t\t\t\t$(\"#xkit-profiler-title\").removeClass(\"loading-up\").html(data.blog.title);\r\n\r\n\t\t\t\tvar m_custom_val = \"None\";\r\n\t\t\t\tif (data.blog.url.indexOf(\".tumblr.com\") === -1) {\r\n\t\t\t\t\tm_custom_val = \"Yes (\" + data.blog.url + \")\";\r\n\t\t\t\t}\r\n\t\t\t\t$(\"#xkit-profiler-custom-domain\").removeClass(\"loading-up\").html(m_custom_val);\r\n\r\n\t\t\t\tif (data.blog.is_nsfw === true) {\r\n\t\t\t\t\t\t$(\"#xkit-profiler-nsfw\").removeClass(\"loading-up\").html(\"Yes\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(\"#xkit-profiler-nsfw\").removeClass(\"loading-up\").html(\"No\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (data.blog.share_likes === true) {\r\n\t\t\t\t\t$(\"#xkit-profiler-is-sharing-likes\").removeClass(\"loading-up\").html(\"Yes (\" + data.blog.likes + \" posts)\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(\"#xkit-profiler-is-sharing-likes\").removeClass(\"loading-up\").html(\"No\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar last_post = data.blog.posts - 1;\r\n\t\t\t\tvar new_url = \"https://api.tumblr.com/v2/blog/\" + user_url + \".tumblr.com/posts\" + \"?api_key=\" + XKit.extensions.profiler.apiKey + \"&offset=\" + last_post + \"&limit=1\";\r\n\r\n\t\t\t\tGM_xmlhttpRequest({\r\n\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\turl: new_url,\r\n\t\t\t\t\tjson: true,\r\n\t\t\t\t\tonerror: function(response) {\r\n\t\t\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tonload: function(response) {\r\n\t\t\t\t\t\tvar data = JSON.parse(response.responseText).response\r\n\t\t\t\t\t\tvar date = new Date(data.posts[0].timestamp*1000);\r\n\t\t\t\t\t\t$(\"#xkit-profiler-since\").removeClass(\"loading-up\").html(date.getFullYear());\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tXKit.extensions.profiler.get_json_p1(user_url, m_window_id);\r\n\t\t\t\tXKit.extensions.profiler.get_json_p2(user_url, m_window_id, 1);\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tget_json_p1: function(user_url, m_window_id) {\r\n\r\n\t\tGM_xmlhttpRequest({\r\n\t\t\tmethod: \"GET\",\r\n\t\t\turl: \"http://\" + user_url + \".tumblr.com/api/read/json?read_id=\" + XKit.tools.random_string(),\r\n\t\t\tjson: false,\r\n\t\t\tonerror: function(response) {\r\n\t\t\t\tconsole.log(\"Error getting page.\");\r\n\t\t\t\t// XKit.extensions.profiler.display_error(m_window_id);\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tonload: function(response) {\r\n\r\n\t\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\r\n\r\n\t\t\t\tvar data = response.responseText.substring(22, response.responseText.length - 2);\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.log(\"Error parsing data.\");\r\n\t\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#xkit-profiler-timezone\").removeClass(\"loading-up\").html(data.tumblelog.timezone);\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tget_json_p2: function(user_url, m_window_id, part) {\r\n\r\n\t\tvar to_get = \"\";\r\n\t\tif (part === 1) { to_get = \"text\"; }\r\n\t\tif (part === 2) { to_get = \"photo\"; }\r\n\t\tif (part === 3) { to_get = \"quote\"; }\r\n\t\tif (part === 4) { to_get = \"link\"; }\r\n\t\tif (part === 5) { to_get = \"chat\"; }\r\n\t\tif (part === 6) { to_get = \"audio\"; }\r\n\t\tif (part === 7) { to_get = \"video\"; }\r\n\t\tif (part === 8) { return; }\r\n\r\n\t\tvar api_url = \"https://api.tumblr.com/v2/blog/\" + user_url + \".tumblr.com/posts\" + \"?api_key=\" + XKit.extensions.profiler.apiKey + \"&type=\" + to_get + \"&limit=1\";\r\n\t\tGM_xmlhttpRequest({\r\n\t\t\tmethod: \"GET\",\r\n\t\t\turl: api_url,\r\n\t\t\tjson: true,\r\n\t\t\tonerror: function(response) {\r\n\t\t\t\tconsole.log(\"Error getting page.\");\r\n\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tonload: function(response) {\r\n\r\n\t\t\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvar data = JSON.parse(response.responseText).response\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tconsole.log(\"Error parsing data.\");\r\n\t\t\t\t\tXKit.extensions.profiler.display_error(m_window_id);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#xkit-profiler-\" + to_get).removeClass(\"loading-up\").html(data[\"total_posts\"]);\r\n\r\n\t\t\t\tXKit.extensions.profiler.get_json_p2(user_url, m_window_id, (part + 1));\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tdisplay_error: function(m_window_id) {\r\n\r\n\t\tif (XKit.extensions.profiler.window_id !== m_window_id) {return; }\r\n\r\n\t\t$(\"#xkit-profiler-contents\").addClass(\"error-box\");\r\n\t\t$(\"#xkit-profiler-contents\").html(\"<div class=\\\"padding-top: 50px;\\\">Can't fetch blog information.<br/>Please try again later.</div>\");\r\n\t\t$(\"#xkit-profiler-contents\").nanoScroller();\r\n\t\t$(\"#xkit-profiler-contents\").nanoScroller({ scroll: 'top' });\r\n\r\n\t},\r\n\r\n\tshow_ump_error: function() {\r\n\r\n\t\tif (XKit.storage.get(\"profiler\",\"shown_warning_about_show_more\",\"\") !== \"yass\") {\r\n\t\t\tXKit.window.show(\"Oops: User Menus+ is missing.\", \"<b>Profiler requires User Menus+ extension to be installed and enabled in order to work.</b> Please download User Menus+ from the extension gallery and refresh the page to start using Profiler.\",\"error\",\"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\r\n\t\t\tXKit.storage.set(\"profiler\",\"shown_warning_about_show_more\",\"yass\");\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n              \ttry {\r\n              \t\tXKit.extensions.show_more.remove_custom_menu(\"profiler\");\r\n              \t} catch(e){\r\n              \t\tXKit.console.add(\"Can't remove custom menu, \" + e.message);\r\n              \t}\r\n\t}\r\n\r\n});","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkQzMUIxMzgxQjM2MTFFM0EzRUJBOUI0RDFFQjc1RUQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkQzMUIxMzkxQjM2MTFFM0EzRUJBOUI0RDFFQjc1RUQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mzk1NzY3RjFCMjYxMUUzQTNFQkE5QjREMUVCNzVFRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5Mzk1NzY4MDFCMjYxMUUzQTNFQkE5QjREMUVCNzVFRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsYvGsQAAAQ/SURBVHjafJYpTzRBEIZ3huG+b8KNQACOIJA4BAYwKCS/AIFEIEkw/ACCwKBIgASDQGBIcByKIyEQ7jvcx/fsvkvRzOx+JXp6qquqq6rfqu5ga2vL8zzf9xljsZiXoK+vL/1C3wmCo18mn5+fjGLqF5KYlt7f343py7qUvR+Cw5ptySiOK2OK9vv9Q+ZZXNH7S7aTKbujqy8TYtrcLJhW4BpNqamls7Oz09NTouaXsaqqqrKyMuSWSNmWLukKLEbLiRvg+fn5/Pz8+vo6EzsnZb+ioqK7u7uvr6+srMyC0JLrtLezs5ORkeFuoPnT09PMzMzCwkJWVlZOTg5jEATKGyY+Pj7e3t5eXl4Ye3t7BwcHc3Nz7cw/EqS5t7u7a6dq2+7t7U1OTh4fHxcWFpaUlDBmZ2fLD3mK5uvr68PDw+3tLSMZGxkZqa+v1xLExprHIzBIKLr9/f2xsTEmZJnwCwoKcB/rsb8kK4+Pj9fX1xcXF/yOjo5qD9wHqZr4lnFZR2FqaoqcNDU1IV1eXk7sUesQTJYQQAzhvLy82dlZEpt03POEiEAno7wTxNzc3N3dXUNDQ2lpKY6HEEKusXhycrK8vGyYwTTHk5mZeXR0tLS0NDAwoHNKCmimDQDi6upqTU0N1kl6yDrxwmck44wu3hFmCcWNjQ0yZhWHcV8flfXi4qLyju/RnDw/P3PsTIAA89AqKiiivra2pkYifhDf5KdVbG9vI0RmQ76LOLfx8fGrqyustLa2hlZRQRH1g4ODb4cCO5PLy0sCBzO2n0v9/f3gVeECs5WVlagMiqhfJ0jCcaa1RqAG3lMmh42Li4utjhobGznSWCpCHSMUh9W2b2r8q5rSZV8VJHnSlXID1IUOq7jfDWCltK7sT0xMDA0NWSegxGJpCCP39/d2YQTy3b0AokRCSBFGzRW3aUdPoqioyNAfWNXBTacDPCg9yhvf/29dxFErMXEUWcmxAQspFShUjo7uZoH/xzp+YEeBJlNkuMRN2kBKtZ6eHjywCIaHhykI6jYqSZ3b3RBH0adD7e3tOpIoTLFugJZrIN1tGNZim5ubFeLvBu8JQjo/P5/llDAlMm0gFDE5PDyMNgzaETBFQMLJVqHjhsvY1tZ2c3ND0w7BdHp6mkr87ZG+X11dHWoYwkLoVZCEqV3TTDo6OjY3N93wBVP3eAE7HLee4bS0tMAJvaOCKCTQ7OrqovFxF7qu4bJ7rdIV4OtXuWV0+2gyAvdfbzo43CGdnZ00Ne4Qg2k6XJL3uro6IjBTf9q1mwq3mJkQcm1tLV2IRssDImSXw6Q5E5YSZQVoSFPaAw7QHjz2HLI7D9+5bwn/JUEmg3VSFEq3dVCDbHwDsxV67bp9CQHM4alhwSrOtW6ZsTqIu+hWlvsOdN+wblhqXJYHc9aeEa5u8lXhempPKyHPfbWro1gFGb71m65B/RNgAE6EQ+bxcXjIAAAAAElFTkSuQmCC","css":"#xkit-profiler-contents {\r\n\tbackground: rgb(245,245,245);\r\n\tborder: 1px solid rgb(190,190,190);\r\n\theight: 200px;\r\n}\r\n\r\n.xkit-profiler-nickname-inline {\r\n\tfont-weight: normal;\r\n\tdisplay: inline-block;\r\n\tmargin-left: 5px;\r\n\tcolor: rgb(100,100,100);\r\n}\r\n\r\n#xkit-profiler-contents.error-box {\r\n\ttext-align: center;\r\n\tcolor: rgb(130,130,130);\r\n\tline-height: 30px;\r\n}\r\n\r\n.xkit-profiler-nickname {\r\n\tfont-weight: normal;\r\n\tmargin-left: 5px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\tmax-width: 55px;\r\n}\r\n\r\n.xkit-profiler-line {\r\n\tborder-bottom: 1px solid rgb(190,190,190);\r\n\tpadding: 0px 10px;\r\n\theight: 25px;\r\n\tline-height: 25px;\r\n\tposition: relative;\r\n}\r\n\r\n.xkit-profiler-line:last-child {\r\n\tborder-bottom: 0;\r\n}\r\n\r\n.xkit-profiler-line.separator {\r\n\tbackground: rgb(190,190,190);\r\n\tfont-weight: bold;\r\n}\r\n\r\n.xkit-profiler-line div.loading-up {\r\n\tbackground: transparent no-repeat 50% 50% url(data:image/gif;base64,R0lGODlhDgAEALMKAOvt7////97i5L3Ey+Xn6vb3+PDy89PY26ixueLl5wAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzU0REE2MUM4NjVBMTFFMkE4N0FGRkVDQThGN0FCRDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzU0REE2MUQ4NjVBMTFFMkE4N0FGRkVDQThGN0FCRDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozRTRCNEE3NTg2NTUxMUUyQTg3QUZGRUNBOEY3QUJEMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozRTRCNEE3Njg2NTUxMUUyQTg3QUZGRUNBOEY3QUJEMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAURAAoALAAAAAAOAAQAAAQfMI2RghHChAJAGQgyBMJxCAFAEAAokiaqshJlYRrnRQAh+QQFEQAKACwAAAAACQAEAAAEFdAIYVQaI4lzhBoIMmzdFw4SZWFJBAAh+QQFEQAKACwAAAAADgAEAAAEH7AAUJQRwqg0RgIEASjCcQjKgCADKJImqrISZWEa50UAIfkEBREACgAsBQAAAAkABAAABBWwAFCUEcIAQoASxyFs3RcKEmVhRgQAOw==);\r\n}\r\n\r\n.xkit-profiler-line div {\r\n\ttext-align: right;\r\n\tposition: absolute;\r\n\ttop: 0; right: 20px;\r\n\theight: 25px;\r\n\tline-height: 25px;\r\n\tmin-width: 15px;\r\n\tmax-width: 240px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}","title":"Profiler","description":"The User Inspection Gadget","developer":"STUDIOXENIX","version":"1.2 REV C","frame":"false","beta":"false","details":"Select Profiler option from the User Menu to see information such as when they started blogging, how many posts they have, timezone, and more.<br><br>Requires User Menus+ to be installed.","file":"found","server":"up","errors":false,"slow":"false"}