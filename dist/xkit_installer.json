{"id":"xkit_installer","script":"//* TITLE XKit Installer **//\r\n//* VERSION 6.9 REV C **//\r\n//* DESCRIPTION Lets you install XKit on your computer. **//\r\n//* DEVELOPER STUDIOXENIX **//\r\nXKit.extensions.xkit_installer = new Object({\r\n\r\n\trunning: false,\r\n\tmin_version: 6.9,\r\n\tinstalled: 0,\r\n\tto_install: [\r\n\t\t'xkit_main',\r\n\t\t'xkit_patches',\r\n\t\t'xkit_preferences',\r\n\t\t'xkit_updates',\r\n\t\t'xinbox',\r\n\t\t'one_click_postage',\r\n\t\t'one_click_reply',\r\n\t\t'tweaks',\r\n\t\t'go_to_dash'\r\n\t],\r\n\r\n\trun: function() {\r\n\r\n\t\tthis.running = true;\r\n\r\n\t\tif (this.min_version > XKit.version) {\r\n\t\t\t// XKit.window.show(\"Framework version mismatch\",\"<b>To be able to install XKit, you need XKit Framework version \" + parseFloat(this.min_version) + \", but you have version \" + XKit.version + \".</b><br/><br/>Please upgrade your XKit by going to the XKit website and try again or click on the Troubleshooting Help button below for more information.\", \"error\",\"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div><a href=\\\"http://www.xkit.info/troubleshooting\\\" class=\\\"xkit-button\\\">Troubleshooting Help</a>\");\r\n\t\t\t// return;\r\n\t\t}\r\n\r\n\t\tXKit.window.show(\"Installing XKit\",\"<div id=\\\"xkit-install-process\\\" style=\\\"font-weight: bold;\\\">Starting installation..</div>Please do not navigate away from this page.\" + XKit.progress.add(\"installation\"),\"info\");\r\n\r\n\t\tXKit.extensions.xkit_installer.next();\r\n\r\n\t},\r\n\r\n\tnext: function() {\r\n\r\n\t\tif (XKit.extensions.xkit_installer.installed >= XKit.extensions.xkit_installer.to_install.length) {\r\n\t\t\t// Installation is complete I think!\r\n\t\t\tXKit.progress.value(\"installation\", 100);\r\n\t\t\tXKit.installed.remove(\"xkit_installer\");\r\n\t\t\tXKit.window.show(\"Thanks for installing me!\",\"<b>Installation of XKit is complete.</b><br/>After refreshing the page, the X icon will show up on the header next to the Inbox button. From there, you can customize XKit to your liking and get new extensions.\", \"info\",\"<a href=\\\"http://www.tumblr.com/dashboard\\\" id=\\\"xkit-restart-and-use\\\" class=\\\"xkit-button default\\\">Refresh page and start using XKit</a><a href=\\\"http://xkit-extension.tumblr.com/post/52742121604/chrome-system-restores-corrupt-profile-settings-and\\\" class=\\\"xkit-button\\\">XKit keeps re-installing itself?</a>\");\r\n\t\t\tXKit.tools.set_setting(\"xkit_installation_complete\",\"true\");\r\n\t\t\t$(\"#xkit-restart-and-use\").click(function() {\r\n\t\t\t\t$(this).addClass(\"disabled\");\r\n\t\t\t\t$(this).html(\"Please wait..\");\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar percentage = Math.round((100 * XKit.extensions.xkit_installer.installed) / (XKit.extensions.xkit_installer.to_install.length));\r\n\t\tXKit.progress.value(\"installation\", percentage);\r\n\r\n\t\tvar to_install = XKit.extensions.xkit_installer.to_install[XKit.extensions.xkit_installer.installed];\r\n\t\tXKit.console.add(\"Will be installing \" + to_install);\r\n\t\t$(\"#xkit-install-process\").html(\"Installing package \" + to_install + \"...\");\r\n\r\n\t\tXKit.install(to_install, function(mdata) {\r\n\r\n\t\t\tif (mdata.errors) {\r\n\t\t\t\tif (mdata.storage_error === true) {\r\n\t\t\t\t\tshow_error_installation(\"[Code: 631] Can't store data on browser\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (mdata.server_down === true) {\r\n\t\t\t\t\tshow_error_installation(\"[Code: 101] Can't reach XKit servers\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (mdata.file === \"not_found\") {\r\n\t\t\t\t\t\tshow_error_installation(\"Can't download \" + to_install + \": Not found\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshow_error_installation(\"Can't download \" + to_install);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\t// Try evaling the script.\r\n\t\t\t\t// If it's working, then move to the next one.\r\n\t\t\t\teval(mdata.script);\r\n\t\t\t\tXKit.extensions.xkit_installer.installed++;\r\n\t\t\t\tXKit.extensions.xkit_installer.next();\r\n\t\t\t} catch(e) {\r\n\t\t\t\tshow_error_installation(\"[Code: 102] Can't run \" + to_install + \":<br/>\" + e.message);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n\t}\r\n\r\n});\r\n","title":"XKit Installer","description":"Lets you install XKit on your computer.","developer":"STUDIOXENIX","version":"6.9 REV C","file":"found","server":"up","errors":false,"frame":"false","beta":"false","slow":"false"}