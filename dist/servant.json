{"id":"servant","script":"//* TITLE Servant **//\r\n//* VERSION 0.4 REV E **//\r\n//* DESCRIPTION XKit Personal Assistant **//\r\n//* DETAILS Automator for XKit: lets you create little Servants that does tasks for you when the conditions you've set are met. **//\r\n//* DEVELOPER STUDIOXENIX **//\r\n//* FRAME false **//\r\n//* SLOW true **//\r\n//* BETA false **//\r\n\r\nXKit.extensions.servant = new Object({\r\n\r\n\trunning: false,\r\n\tslow: true,\r\n\r\n\tservants: new Array(),\r\n\r\n\tpreferences: {\r\n\t\t\"sep2\": {\r\n\t\t\ttext: \"My Servants\",\r\n\t\t\ttype: \"separator\"\r\n\t\t}\r\n\t},\r\n\r\n\tcauses: {\r\n\r\n\t\tsep_1: {\r\n\r\n\t\t\ttext: \"Posts on Dashboard\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\tcontains: {\r\n\r\n\t\t\ttext: \"Post Contains\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tplaceholder: \"ie: 'Mitt Romney'\",\r\n\t\t\treturns: \"the word found\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs if a post containing the word you've entered is found, affects that post.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_text = $(obj).find(\".post_body\").text();\r\n\r\n\t\t\t\tif ($(obj).find(\".post_title\").length > 0) {\r\n\t\t\t\t\tm_text = m_text + \" \" + $(obj).find(\".post_title\").text();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_text = m_text.toLowerCase();\r\n\t\t\t\tparameter = parameter.toLowerCase();\r\n\r\n\t\t\t\tif (m_text.indexOf(parameter) !== -1) {\r\n\r\n\t\t\t\t\tm_object.run = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = parameter;\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tcontains_not: {\r\n\r\n\t\t\ttext: \"Post Doesn't Contain\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tplaceholder: \"ie: 'Mitt Romney'\",\r\n\t\t\treturns: \"the word not found\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs if a post containing the word you've entered is not found, affects that post.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_text = $(obj).find(\".post_body\").text();\r\n\r\n\t\t\t\tif ($(obj).find(\".post_title\").length > 0) {\r\n\t\t\t\t\tm_text = m_text + \" \" + $(obj).find(\".post_title\").text();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_text = m_text.toLowerCase();\r\n\t\t\t\tparameter = parameter.toLowerCase();\r\n\r\n\t\t\t\tif (m_text.indexOf(parameter) == -1) {\r\n\r\n\t\t\t\t\tm_object.run = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = parameter;\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tmade_by: {\r\n\r\n\t\t\ttext: \"Post is from\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\treturns: \"the owner's URL\",\r\n\t\t\tplaceholder: \"ie: 'xkit-extension'\",\r\n\t\t\tdescription: \"Runs if a post is created/reblogged from the URL you've entered is found, affects that post.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif ($(obj).attr('data-tumblelog-name') === parameter) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = parameter;\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tsourced: {\r\n\r\n\t\t\ttext: \"Post is sourced from\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\treturns: \"the source URL\",\r\n\t\t\tplaceholder: \"ie: 'xkit-extension'\",\r\n\t\t\tdescription: \"Runs if a post is sourced to the URL you've entered is found, affects that post.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif ($(obj).find(\".post_source_link\").length > 0) {\r\n\r\n\t\t\t\t\tif ($(obj).find(\".post_source_link\").attr('title') === parameter) {\r\n\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = parameter;\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tis_original: {\r\n\r\n\t\t\ttext: \"Post is original\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs if the post is original, not reblogged.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif (typeof m_post === \"undefined\") {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (m_post.is_reblogged === false) {\r\n\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tis_reblogged: {\r\n\r\n\t\t\ttext: \"Post is reblogged\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs if the post is not original, but reblogged.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif (typeof m_post === \"undefined\") {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (m_post.is_reblogged === true) {\r\n\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tpost_type: {\r\n\r\n\t\t\ttext: \"Post type is\",\r\n\t\t\ttype: \"post_type\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\treturns: \"the post type\",\r\n\t\t\tdescription: \"Runs if a post is of the type you've selected\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar search_for = parameter;\r\n\r\n\t\t\t\tif (search_for === \"text\") { search_for = \"regular\"; }\r\n\t\t\t\tif (search_for === \"chat\") { search_for = \"conversation\"; }\r\n\r\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif (typeof m_post === \"undefined\") {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (search_for === \"photo\") {\r\n\t\t\t\t\t\tif (m_post.type === \"photo\" || m_post.type === \"panorama\" || m_post.type === \"photoset\") {\r\n\t\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tif (m_post.type === search_for) {\r\n\t\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tpost_is_mine: {\r\n\r\n\t\t\ttext: \"Post is mine\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs if you've reblogged/created this post.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif (typeof m_post === \"undefined\") {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (m_post.is_mine === true) {\r\n\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tpost_liked: {\r\n\r\n\t\t\ttext: \"Post is liked by me\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs if you've already liked a post.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_post = XKit.interface.post($(obj));\r\n\t\t\t\tm_object.run = false;\r\n\r\n\t\t\t\tif (typeof m_post === \"undefined\") {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (m_post.liked === true) {\r\n\t\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tpost_not_done: {\r\n\r\n\t\t\ttext: \"There is a post (not recommended)\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs on all posts. Not recommended.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tif ($(obj).hasClass(\"with_permalink\") && $(obj).hasClass(\"post_full\")) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tsep_99a: {\r\n\r\n\t\t\ttext: \"Content Ratings\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\tpost_adult: {\r\n\r\n\t\t\ttext: \"The post is made/reblogged by an Adult blog\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs on all posts reblogged/posted by a blog with Adult rating.<br/>(ie: a porn blog)\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tif ($(obj).attr('data-tumblelog-content-rating') === \"adult\") {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tpost_nsfw: {\r\n\r\n\t\t\ttext: \"The post is made/reblogged by a NSFW blog\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs on all posts reblogged/posted by a blog with NSFW rating.<br/>(ie: a blog that might post porn/nsfw stuff from time to time)\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tif ($(obj).attr('data-tumblelog-content-rating') === \"nsfw\") {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tpost_nsfw_adult: {\r\n\r\n\t\t\ttext: \"The post is made/reblogged by a NSFW/adult blog\",\r\n\t\t\ttype: \"\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\truns_on: \"post\",\r\n\t\t\tdescription: \"Runs on all posts reblogged/posted by a blog with an Adult or NSFW rating.\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tif ($(obj).attr('data-tumblelog-content-rating') === \"adult\" || $(obj).attr('data-tumblelog-content-rating') === \"nsfw\") {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.pass = $(obj);\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tsep_99: {\r\n\r\n\t\t\ttext: \"Pages\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\ton_dashboard: {\r\n\r\n\t\t\ttext: \"I'm on the dashboard\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are on the dashboard\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = (XKit.interface.where().dashboard);\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ton_inbox: {\r\n\r\n\t\t\ttext: \"I'm on the inbox\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are on the inbox page\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = (XKit.interface.where().inbox);\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ton_channel: {\r\n\r\n\t\t\ttext: \"I'm on a blog posts page (/blog/[url])\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are posts page of your blog\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = (XKit.interface.where().channel && $(\"body\").hasClass(\"dashboard_index\"));\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ton_likes: {\r\n\r\n\t\t\ttext: \"I'm on my likes page\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are on the likes page\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = (document.location.href.indexOf('www.tumblr.com/likes') !== -1);\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ton_queue: {\r\n\r\n\t\t\ttext: \"I'm on the queue page\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are on the queue page of your blog\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = (XKit.interface.where().queue);\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ton_drafts: {\r\n\r\n\t\t\ttext: \"I'm on the drafts page\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are on the drafts page of your blog\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = (XKit.interface.where().drafts);\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ton_search: {\r\n\r\n\t\t\ttext: \"I'm on a tracked tag or search\",\r\n\t\t\ttype: \"page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs if you are on the a tracked tag page or on search\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tif (document.location.href.indexOf(\"www.tumblr.com/tagged/\") !== -1 || document.location.href.indexOf(\"www.tumblr.com/search/\") !== -1) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tsep_50: {\r\n\r\n\t\t\ttext: \"Date and Time\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\ttime_day: {\r\n\r\n\t\t\ttext: \"It's day\",\r\n\t\t\ttype: \"time\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\treturns: \"the hour, in 24-hour format\",\r\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the time is between 6 am and 6 pm\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_hour = new Date().getHours();\r\n\r\n\t\t\t\tif (m_hour >= 6 && m_hour < 18) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = m_hour;\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ttime_night: {\r\n\r\n\t\t\ttext: \"It's night\",\r\n\t\t\ttype: \"time\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\treturns: \"the hour, in 24-hour format\",\r\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the time is between 6 pm and 6 am\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_hour = new Date().getHours();\r\n\r\n\t\t\t\tif (!(m_hour >= 6 && m_hour < 18)) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = m_hour;\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ttime_weekend: {\r\n\r\n\t\t\ttext: \"It's weekend\",\r\n\t\t\ttype: \"time\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the day is saturday or sunday\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_today = new Date();\r\n\r\n\t\t\t\tif(m_today.getDay() == 6 || m_today.getDay() == 0) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ttime_weekday: {\r\n\r\n\t\t\ttext: \"It's weekday\",\r\n\t\t\ttype: \"time\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Runs each time you refresh the page,<br/>if the day is not a saturday or a sunday\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_today = new Date();\r\n\r\n\t\t\t\tif (m_today.getDay() != 6 && m_today.getDay() != 0) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\ttime_day: {\r\n\r\n\t\t\ttext: \"The day is\",\r\n\t\t\ttype: \"day\",\r\n\t\t\treturns: \"the date (0=sunday, 6=saturday)\",\r\n\t\t\tdescription: \"Runs if the day is the thingy you've selected\",\r\n\r\n\t\t\trun: function(parameter, obj) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_today = new Date();\r\n\r\n\t\t\t\tif (m_today.getDay() == parameter) {\r\n\t\t\t\t\tm_object.run = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tm_object.run = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t\tsep_100: {\r\n\r\n\t\t\ttext: \"Other\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\trun_js: {\r\n\r\n\t\t\ttext: \"Run Javascript Code\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"textarea\",\r\n\t\t\tplaceholder: \"ie: 'if (mary.has_lamb == true) {\\n\\treturn true;\\n }'\",\r\n\t\t\tdescription: \"Lets you run Javascript Code.<br/>JQuery and XKit API is supported.\",\r\n\r\n\t\t\trun: function(parameter, returns) {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tvar m_return = false;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tm_return = new Function(parameter)();\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\tm_return = false;\r\n\t\t\t\t\tconsole.log(\"Unable to run Servant! ---> \" + e.message);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tm_object.run = m_return;\r\n\t\t\t\tm_object.return = \"\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tcivilization_ends: {\r\n\r\n\t\t\ttext: \"Civilization comes to an end\",\r\n\t\t\ttype: \"zombie_cat_attack\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\treturns: \"the cause (ie: 'zombies')\",\r\n\t\t\tdescription: \"Runs if a society no longer functions, due to reasons<br/> such as a Manbearpig being on the loose\",\r\n\r\n\t\t\trun: function() {\r\n\r\n\t\t\t\tvar m_object = {};\r\n\r\n\t\t\t\tm_object.run = false;\r\n\t\t\t\tm_object.return = \"zombies\";\r\n\r\n\t\t\t\treturn m_object;\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t},\r\n\r\n\tactions: {\r\n\r\n\t\tsep_1: {\r\n\r\n\t\t\ttext: \"Generic\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\tdisplay_notification: {\r\n\r\n\t\t\ttext: \"Display notification\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tplaceholder: \"ie: 'Wake up!'\",\r\n\t\t\tdescription: \"Displays an XKit notification on the bottom left of the screen.\",\r\n\r\n\t\t\trun: function(parameter, returns) {\r\n\r\n\t\t\t\tvar parameter_fixed = parameter;\r\n\r\n\t\t\t\tfor (var i=0;i<=10;i++) {\r\n\t\t\t\t\tparameter_fixed = parameter_fixed.replace(\"%\" + (i + 1), returns[i]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tXKit.notifications.add(parameter_fixed, \"ok\", true);\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\r\n\t\tdisplay_window: {\r\n\r\n\t\t\ttext: \"Display alert\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tplaceholder: \"ie: 'Wake up!'\",\r\n\t\t\tdescription: \"Displays an alert window.\",\r\n\r\n\t\t\trun: function(parameter, returns) {\r\n\r\n\t\t\t\tvar parameter_fixed = parameter;\r\n\r\n\t\t\t\tfor (var i=0;i<=10;i++) {\r\n\t\t\t\t\tparameter_fixed = parameter_fixed.replace(\"%\" + (i + 1), returns[i]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tXKit.window.show(\"Servant Alert\", parameter_fixed, \"info\", \"<div id=\\\"xkit-close-message\\\" class=\\\"xkit-button default\\\">OK</div>\");\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsep_2: {\r\n\r\n\t\t\ttext: \"Post Related\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\tblock_post: {\r\n\r\n\t\t\ttext: \"Hide the post\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tdescription: \"Completely hides the post\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\r\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\r\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\r\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\t$(to_pass[i]).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\thighlight_post: {\r\n\r\n\t\t\ttext: \"Highlight the post\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tdescription: \"Highlight the post with a yellow glowing ring of glow.\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\t$(to_pass[i]).css(\"box-shadow\",\"0px 0px 10px 4px yellow\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdim_post: {\r\n\r\n\t\t\ttext: \"Dim the post\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tdescription: \"Dims the posts a lil bit.\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\r\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\r\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\r\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\t$(to_pass[i]).addClass(\"xkit-servant-dimmed\");\r\n\t\t\t\t\t\t$(to_pass[i]).find(\".post_control_menu.creator\").click(function() {\r\n\t\t\t\t\t\t\tif ($(this).hasClass(\"active\")) {\r\n\t\t\t\t\t\t\t\t$(this).closest(\".post.post_full\").removeClass(\"xkit-servant-dimmed-but-active\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$(this).closest(\".post.post_full\").addClass(\"xkit-servant-dimmed-but-active\");\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tlike_post: {\r\n\r\n\t\t\ttext: \"Like the post\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tdescription: \"Automatically likes the post\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\r\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\r\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\r\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\t$(to_pass[i]).find(\".post_control.like\").not(\".liked\").trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tunlike_post: {\r\n\r\n\t\t\ttext: \"Unlike the post\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tdescription: \"Automatically unlikes the post\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\r\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\r\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\r\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\t$(to_pass[i]).find(\".post_control.like.liked\").trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tcolor_post: {\r\n\r\n\t\t\ttext: \"Colorize the post\",\r\n\t\t\tcompatibility: \"post\",\r\n\t\t\tdescription: \"Puts a colored band on top the post\",\r\n\t\t\ttype: \"color\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\t// Parameter     -> \"%1 is happening!\"\r\n\t\t\t\t// Returns \t -> the list of %1s and stuff.\r\n\t\t\t\t// To_Pass \t -> passed objects, such as a post\r\n\t\t\t\t// Compatibility -> \"post\", \"time\", etc.\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\t$(to_pass[i]).append(\"<div class=\\\"xkit-servant-rubber-band\\\" style=\\\"background-color: \" + parameter + \"\\\">&nbsp;</div>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsep_99: {\r\n\r\n\t\t\ttext: \"Flow\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\task_me: {\r\n\r\n\t\t\ttext: \"Ask me before continuing\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"text\",\r\n\t\t\tstop: true,\r\n\t\t\tplaceholder: \"ie: 'You really wanna run the code?'\",\r\n\t\t\tdescription: \"Shows a confirmation window before moving to the next action, stops if you cancel.\",\r\n\r\n\t\t\trun: function(parameter) {\r\n\r\n\t\t\t\tif (confirm(\"XKit Servant Message\\nPlease confirm the action.\\n\\n\" + parameter)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdelete: {\r\n\r\n\t\t\ttext: \"Delete this servant\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"flow\",\r\n\t\t\tstop: true,\r\n\t\t\tdescription: \"Deletes this servant completely.\",\r\n\r\n\t\t\trun: function(parameters, returns, to_pass, compatibility, servant_object) {\r\n\r\n\t\t\t\tXKit.extensions.servant.delete_servant(servant_object.id);\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsep_100a: {\r\n\r\n\t\t\ttext: \"XKit\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\tenable_extension: {\r\n\r\n\t\t\ttext: \"Enable Extension\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"extension\",\r\n\t\t\tdescription: \"Enables and runs an extension, if it's disabled\",\r\n\r\n\t\t\trun: function(parameter, returns) {\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tif (XKit.installed.check(parameter) === true) {\r\n\t\t\t\t\t\tif (XKit.installed.enabled(parameter) === false) {\r\n\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tif (typeof XKit.extensions[parameter].preferences !== \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tXKit.extensions.xkit_main.load_extension_preferences(parameter);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tXKit.extensions[parameter].run();\r\n\t\t\t\t\t\t\t\tXKit.installed.enable(parameter);\r\n\t\t\t\t\t\t\t\tXKit.notifications.add(\"Enabled '\" + parameter + \"'\", \"ok\");\r\n\t\t\t\t\t\t\t} catch(e) {\r\n\t\t\t\t\t\t\t\tXKit.console.add(\"Can not run \" + extension_id + \": \" + e.message);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} catch(e) {\r\n\r\n\t\t\t\t\tconsole.log(\"Can't disable \" + parameter + \", \" + e.message);\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}, 1000);\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tdisable_extension: {\r\n\r\n\t\t\ttext: \"Disable Extension\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"extension\",\r\n\t\t\tdescription: \"Disables and stop an extension, if it's enabled and running.<br/>Please note that some extensions might need you<br/>to refresh the page to be disabled completely and properly.\",\r\n\r\n\t\t\trun: function(parameter, returns) {\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tif (XKit.installed.check(parameter) === true) {\r\n\t\t\t\t\t\tif (XKit.installed.enabled(parameter) === true) {\r\n\t\t\t\t\t\t\tXKit.installed.disable(parameter);\r\n\t\t\t\t\t\t\tXKit.extensions[parameter].destroy();\r\n\t\t\t\t\t\t\tXKit.notifications.add(\"Disabled '\" + parameter + \"'\", \"ok\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} catch(e) {\r\n\r\n\t\t\t\t\tconsole.log(\"Can't disable \" + parameter + \", \" + e.message);\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}, 1000);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsep_100: {\r\n\r\n\t\t\ttext: \"Miscellaneous\",\r\n\t\t\ttype: \"separator\"\r\n\r\n\t\t},\r\n\r\n\t\trun_js: {\r\n\r\n\t\t\ttext: \"Run Javascript Code\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\ttype: \"textarea\",\r\n\t\t\tplaceholder: \"ie: 'alert(&quot;%1 happened!&quot;);'\",\r\n\t\t\tdescription: \"Lets you run Javascript Code.<br/>JQuery and XKit API is supported.\",\r\n\r\n\t\t\trun: function(parameter, returns, to_pass, compatibility) {\r\n\r\n\t\t\t\tvar parameter_fixed = parameter;\r\n\r\n\t\t\t\tfor (var i=0;i<=10;i++) {\r\n\t\t\t\t\tparameter_fixed = parameter_fixed.replace(\"%\" + (i + 1), returns[i]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar m_post = \"\";\r\n\r\n\t\t\t\tfor (var i=0;i<to_pass.length;i++) {\r\n\t\t\t\t\tif (compatibility[i] === \"post\") {\r\n\t\t\t\t\t\tm_post = $(to_pass[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (m_post !== \"\") {\r\n\r\n\t\t\t\t\tvar to_run = function() { post = m_post; eval(parameter_fixed); };\r\n\t\t\t\t\tto_run();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\teval(parameter_fixed);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\trefresh: {\r\n\r\n\t\t\ttext: \"Refresh the page\",\r\n\t\t\tcompatibility: \"\",\r\n\t\t\tdescription: \"Reloads the page.<br/>Can be useful after disabling/enabling an extension.\",\r\n\r\n\t\t\trun: function(parameter, returns) {\r\n\r\n\t\t\t\tlocation.reload();\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t},\r\n\r\n\tload_servants: function() {\r\n\r\n\t\tvar servants_load = XKit.storage.get(\"servant\", \"servants\", \"\");\r\n\r\n\t\ttry {\r\n\r\n\t\t\tXKit.extensions.servant.servants = JSON.parse(servants_load);\r\n\t\t\tconsole.log(\"Servant loaded \" + XKit.extensions.servant.servants.length + \" servants.\");\r\n\r\n\t\t} catch(e) {\r\n\r\n\t\t\tXKit.extensions.servant.servants = new Array();\r\n\t\t\tXKit.extensions.servant.save_servants();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tsave_servants: function() {\r\n\r\n\t\tXKit.storage.set(\"servant\", \"servants\", JSON.stringify(XKit.extensions.servant.servants));\r\n\r\n\t},\r\n\r\n\trun: function() {\r\n\t\tthis.running = true;\r\n\r\n\t\tif ($(\"body\").hasClass(\"xkit-servant-running\")) { console.log(\"Not going to run Servant again, no I won't.\"); return; }\r\n\r\n\t\t$(\"body\").addClass(\"xkit-servant-running\");\r\n\r\n\t\tXKit.tools.init_css(\"servant\");\r\n\r\n\t\tthis.load_servants();\r\n\t\tthis.run_servants();\r\n\r\n\t\t$(document).on(\"click\", \"#glass_overlay\", function() { $(\".xkit-servant-dimmed-but-active\").removeClass(\"xkit-servant-dimmed-but-active\"); });\r\n\r\n\t},\r\n\r\n\truns_on_posts: new Array(),\r\n\r\n\trun_servants: function() {\r\n\r\n\t\tm_servants = XKit.extensions.servant.servants;\r\n\r\n\t\tif (m_servants.length == 0) { return; }\r\n\r\n\t\tvar runs_on_posts = new Array();\r\n\r\n\t\tfor (var i=0;i<m_servants.length;i++) {\r\n\r\n\t\t\tvar m_result = XKit.extensions.servant.run_servant(m_servants[i], false);\r\n\r\n\t\t\tif (m_result == \"post\") {\r\n\t\t\t\t// This thing has a runs_on mode, for posts.\r\n\t\t\t\truns_on_posts.push(m_servants[i]);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconsole.log(\"- - --  -- - - - -RUNS ON POSTS - -- - - - - -- - - -\");\r\n\t\tconsole.log(runs_on_posts);\r\n\r\n\t\tXKit.extensions.servant.runs_on_posts = new Array();\r\n\r\n\t\tif (runs_on_posts.length > 0) {\r\n\r\n\t\t\tXKit.extensions.servant.runs_on_posts = runs_on_posts;\r\n\t\t\tXKit.post_listener.add(\"servant\", XKit.extensions.servant.do_posts);\r\n\t\t\tXKit.extensions.servant.do_posts();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdo_posts: function() {\r\n\r\n\t\tvar posts = XKit.interface.get_posts(\"xkit-servants-all-done\");\r\n\r\n\t\t$(posts).each(function() {\r\n\r\n\t\t\tfor (var i=0;i<XKit.extensions.servant.runs_on_posts.length;i++) {\r\n\t\t\t\tXKit.extensions.servant.run_servant(XKit.extensions.servant.runs_on_posts[i], true);\r\n\t\t\t}\r\n\r\n\t\t\t$(this).addClass(\"xkit-servant-all-done\");\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\trun_servant: function(obj, post_mode) {\r\n\r\n\t\tconsole.log(\"Running servant with id \" + obj.id);\r\n\t\tconsole.log(obj);\r\n\r\n\t\t// to-do: check last run time.\r\n\r\n\t\tvar causes = obj.causes;\r\n\t\tvar actions = obj.actions;\r\n\r\n\t\tvar returns = new Array();\r\n\t\tvar to_pass = new Array();\r\n\t\tvar compatibility = new Array();\r\n\r\n\t\tvar do_run = -1;\r\n\t\tvar has_runs_on = false;\r\n\t\tvar does_run_on = \"\";\r\n\r\n\t\tfor (var i=0;i<causes.length;i++) {\r\n\r\n\t\t\tif (XKit.extensions.servant.causes[causes[i].id].runs_on === \"post\") {\r\n\t\t\t\thas_runs_on = true;\r\n\t\t\t\tdoes_run_on = \"post\";\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar m_object;\r\n\r\n\t\tif (has_runs_on === true && does_run_on === \"post\") {\r\n\r\n\t\t\tif (!post_mode) {\r\n\r\n\t\t\t\t// We will go through these later.\r\n\t\t\t\tconsole.log(\"Skipping because not in post_mode, and has class post mode.\");\r\n\t\t\t\treturn \"post\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tm_object = $(\".post\").not(\".xkit-servant-\" + obj.id).not(\"#new_post\").first();\r\n\t\t\t\tif (m_object.length === 0) { return false; }\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor (var i=0;i<causes.length;i++) {\r\n\r\n\t\t\tvar to_run = XKit.extensions.servant.causes[causes[i].id].run;\r\n\r\n\t\t\tvar m_result = false;\r\n\r\n\t\t\tif (XKit.extensions.servant.causes[causes[i].id].runs_on === \"post\") {\r\n\r\n\t\t\t\tm_result = to_run(causes[i].value, $(m_object));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tm_result = to_run(causes[i].value);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Save the \"return\", ie: %1, %2..\r\n\t\t\treturns.push(m_result.return);\r\n\r\n\t\t\t// Save the pass, which can be a post object, etc.\r\n\t\t\tto_pass.push(m_result.pass);\r\n\r\n\t\t\t// We should save this too, so we wouldn't, for example,\r\n\t\t\t// push a post object to a function that doesn't take post objects.\r\n\t\t\tcompatibility.push(XKit.extensions.servant.causes[causes[i].id].compatibility);\r\n\r\n\t\t\t// alert(\"on \" + obj.id + \":\\n\" + \"returned \" + m_result.run + \" on causer \" + i + \" --- parameter = \" + causes[i].value + \"\\ntype = \" + causes[i].id);\r\n\r\n\t\t\tif (m_result.run === false) {\r\n\t\t\t\tdo_run = 0;\r\n\t\t\t\tbreak;\r\n\t\t\t} else {\r\n\t\t\t\tdo_run = 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t$(m_object).addClass(\"xkit-servant-\" + obj.id);\r\n\r\n\t\tif (do_run !== 1) { return; }\r\n\r\n\t\tfor (var i=0;i<actions.length;i++) {\r\n\r\n\t\t\tvar to_run = XKit.extensions.servant.actions[actions[i].id].run;\r\n\r\n\t\t\tvar m_result = XKit.extensions.servant.actions[actions[i].id].run(actions[i].value, returns, to_pass, compatibility, obj);\r\n\r\n\t\t\tif (XKit.extensions.servant.actions[actions[i].id].stop === true) {\r\n\r\n\t\t\t\t// This is a flow thingy, where we must wait for it to return a value\r\n\t\t\t\t// so we can go on.\r\n\r\n\t\t\t\tif (m_result === false) {\r\n\t\t\t\t\t// We should stop.\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn \"\";\r\n\r\n\t},\r\n\r\n\tadd_cause_count: 0,\r\n\r\n\tshow_add: function(m_div) {\r\n\r\n\t\tvar m_html = \"<input type=\\\"text\\\" placeholder=\\\"Servant Title - optional (ie: 'Hide posts containing XKit on tracked pages')\\\" class=\\\"xkit-textbox\\\" id=\\\"xkit-servant-add-title\\\">\";\r\n\r\n\t\tXKit.extensions.servant.add_cause_count = 0;\r\n\t\tXKit.extensions.servant.add_action_count = 0;\r\n\r\n\t\t// ---- Causes\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-when xkit-servant-add-division\\\">\" +\r\n\t\t\t\t\t\"<div class=\\\"xkit-servant-division-title\\\">When</div>\" +\r\n\t\t\t\t\t\tXKit.extensions.servant.add_field_cause();\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-more xkit-servant-add-more-causes\\\">Add another</div>\";\r\n\t\tm_html = m_html + \"</div>\";\r\n\r\n\t\t// ---- Actions\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-do xkit-servant-add-division\\\">\" +\r\n\t\t\t\t\t\"<div class=\\\"xkit-servant-division-title\\\">Do</div>\" +\r\n\t\t\t\t\t\tXKit.extensions.servant.add_field_action();\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-more xkit-servant-add-more-actions\\\">Add another</div>\";\r\n\t\tm_html = m_html + \"</div>\";\r\n\r\n\t\t// ---- Additional\r\n\r\n\t\t// m_html = m_html + \"<div class=\\\"xkit-servant-silent-division\\\">&nbsp;</div><div class=\\\"xkit-checkbox\\\" style=\\\"padding-left: 0;\\\"><b>&nbsp;</b> Run this servant even when only one of the requirements is met. (OR mode)</div>\";\r\n\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-compatibility-error\\\"><b>There is an incompatibility here.</b><br/>For example, you can't create a servant with the job \\\"When the time is 7 PM, block the post\\\": please check the combination and try again. Click Help on bottom right for more information.</div>\";\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-javascript-warning\\\"><b>Be very careful!</b> The \\\"Run Javascript Code\\\" option is for experts. Do not copy/paste and run code from people you don't know and trust, very bad things can happen.</div>\";\r\n\r\n\t\tXKit.window.show(\"Add Servant\", m_html, \"question\", \"<div class=\\\"xkit-button default\\\" id=\\\"xkit-servant-add\\\">Add Servant..</div><div id=\\\"xkit-close-message\\\" class=\\\"xkit-button\\\">Cancel</div><a href=\\\"http://xkit.info/notes/servant_help.php\\\" target=\\\"_BLANK\\\" class=\\\"xkit-button float-right\\\">Help</a>\", true);\r\n\r\n\t\tXKit.extensions.servant.bind_actions_on_add_window();\r\n\t\tXKit.extensions.servant.react_to_selection_change();\r\n\r\n\t\t$(\".xkit-servant-add-more-actions\").click(function() {\r\n\r\n\t\t\tvar m_html = XKit.extensions.servant.add_field_action();\r\n\t\t\t$(\".xkit-servant-do\").find(\".xkit-servant-add-more\").before(m_html);\r\n\t\t\tcenterIt($(\"#xkit-window\"));\r\n\r\n\t\t\tXKit.extensions.servant.readjust_lines($(\".xkit-servant-option-action-line-0\"));\r\n\r\n\t\t\tXKit.extensions.servant.bind_actions_on_add_window();\r\n\t\t\tXKit.extensions.servant.react_to_selection_change();\r\n\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-add-more-causes\").click(function() {\r\n\r\n\t\t\tvar m_html = XKit.extensions.servant.add_field_cause();\r\n\t\t\t$(\".xkit-servant-when\").find(\".xkit-servant-add-more\").before(m_html);\r\n\t\t\tcenterIt($(\"#xkit-window\"));\r\n\r\n\t\t\tXKit.extensions.servant.readjust_lines($(\".xkit-servant-option-cause-line-0\"));\r\n\r\n\t\t\tXKit.extensions.servant.bind_actions_on_add_window();\r\n\t\t\tXKit.extensions.servant.react_to_selection_change();\r\n\r\n\t\t});\r\n\r\n\t\t$(\"#xkit-servant-add\").click(function() {\r\n\r\n\t\t\tXKit.extensions.servant.process_add(m_div);\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tcheck_if_empty_value: function() {\r\n\r\n\t\tvar found = false;\r\n\r\n\t\t$(\".xkit-servant-option-textbox\").each(function() {\r\n\r\n\t\t\tif ($.trim($(this).val()) === \"\") {\r\n\t\t\t\tfound = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-option-listbox\").each(function() {\r\n\r\n\t\t\tif ($.trim($(this).val()) === \"\") {\r\n\t\t\t\tfound = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn found;\r\n\r\n\t},\r\n\r\n\tget_add_value: function(obj) {\r\n\r\n\t\tif ($(obj).find(\".xkit-servant-option-textbox\").length > 0) {\r\n\r\n\t\t\treturn $(obj).find(\".xkit-servant-option-textbox\").val();\r\n\r\n\t\t}\r\n\r\n\t\tif ($(obj).find(\".xkit-servant-option-listbox\").length > 0) {\r\n\r\n\t\t\treturn $(obj).find(\".xkit-servant-option-listbox\").val();\r\n\r\n\t\t}\r\n\r\n\t\tif ($(obj).find(\".xkit-servant-option-textareabox\").length > 0) {\r\n\r\n\t\t\treturn $(obj).find(\".xkit-servant-option-textareabox\").val();\r\n\r\n\t\t}\r\n\r\n\t\treturn \"\";\r\n\r\n\t},\r\n\r\n\tprocess_add: function(m_div) {\r\n\r\n\t\t// Get the WHENs and DOs.\r\n\r\n\t\tif ($(\"#xkit-servant-add\").hasClass(\"disabled\")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar when = new Array();\r\n\t\tvar action = new Array();\r\n\r\n\t\tif (XKit.extensions.servant.check_if_empty_value() === true) {\r\n\r\n\t\t\talert(\"Please fill all the values.\");\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t$(\".xkit-servant-option-line-cause\").each(function() {\r\n\r\n\t\t\tvar m_object = new Object();\r\n\r\n\t\t\tm_object.id = $(this).find(\".xkit-servant-add-option\").val();\r\n\t\t\tm_object.value = XKit.extensions.servant.get_add_value($(this));\r\n\r\n\t\t\twhen.push(m_object);\r\n\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-option-line-action\").each(function() {\r\n\r\n\t\t\tvar m_object = new Object();\r\n\r\n\t\t\tm_object.id = $(this).find(\".xkit-servant-add-option\").val();\r\n\t\t\tm_object.value = XKit.extensions.servant.get_add_value($(this));\r\n\r\n\t\t\taction.push(m_object);\r\n\r\n\t\t});\r\n\r\n\t\tvar m_servant = new Object();\r\n\r\n\t\tm_servant.id = XKit.tools.random_string() + Math.round(new Date().getTime() / 1000);\r\n\t\tm_servant.causes = when;\r\n\t\tm_servant.actions = action;\r\n\t\tm_servant.create_time = Math.round(new Date().getTime() / 1000);\r\n\t\tm_servant.last_run = -1;\r\n\r\n\t\tm_servant.title = $.trim($(\"#xkit-servant-add-title\").val());\r\n\r\n\t\tXKit.extensions.servant.load_servants();\r\n\r\n\t\tXKit.extensions.servant.servants.push(m_servant);\r\n\r\n\t\tXKit.extensions.servant.save_servants();\r\n\r\n\t\tXKit.window.close();\r\n\r\n\t\tXKit.extensions.xkit_preferences.restart_extension(\"servant\");\r\n\r\n\t\tif (typeof m_div !== \"undefined\") {\r\n\t\t\tXKit.extensions.servant.cpanel(m_div);\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tadd_window_option_get_real_value: function(obj) {\r\n\r\n\t\tvar m_val = $(obj).val();\r\n\r\n\t\tvar to_return = \"\";\r\n\r\n\t\t$(obj).find(\"option\").each(function() {\r\n\r\n\t\t\tif ($(this).attr('value') === m_val) {\r\n\r\n\t\t\t\tto_return = $(this);\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn to_return;\r\n\r\n\t},\r\n\r\n\tsettings_box_text: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_placeholder = \"ie: 'xkit'\";\r\n\r\n\t\tif (typeof $(real_val).attr('data-placeholder') !== \"undefined\" && $(real_val).attr('data-placeholder') !== \"undefined\") { m_placeholder = $(real_val).attr('data-placeholder'); }\r\n\r\n\t\tm_placeholder = XKit.tools.replace_all(m_placeholder, \"\\\"\", \"&quot;\");\r\n\r\n\t\t$(obj).html(\"<input data-id=\\\"\" + $(parent).parent().attr('data-id') + \"\\\" type=\\\"text\\\" placeholder=\\\"\" + m_placeholder + \"\\\" class=\\\"xkit-textbox xkit-servant-option-textbox\\\">\");\r\n\r\n\t},\r\n\r\n\tsettings_box_textarea: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_placeholder = \"ie: 'xkit'\";\r\n\r\n\t\tif (typeof $(real_val).attr('data-placeholder') !== \"undefined\" && $(real_val).attr('data-placeholder') !== \"undefined\") { m_placeholder = $(real_val).attr('data-placeholder'); }\r\n\r\n\t\tm_placeholder = XKit.tools.replace_all(m_placeholder, \"\\\"\", \"&quot;\");\r\n\r\n\t\t$(parent).parent().addClass(\"servant-contains-textarea\");\r\n\r\n\t\t$(obj).html(\"<textarea data-id=\\\"\" + $(parent).parent().attr('data-id') + \"\\\" placeholder=\\\"\" + m_placeholder + \"\\\" class=\\\"xkit-textbox xkit-servant-option-textareabox\\\"></textarea>\");\r\n\r\n\t\t$(\".xkit-servant-option-textareabox\").bind(\"keydown\", function(event) {\r\n\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tevent.stopImmediatePropagation();\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tsettings_box_extension: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_array = XKit.installed.list();\r\n\r\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\r\n\r\n\t\tfor (var i=0;i<m_array.length;i++) {\r\n\r\n\t\t\tvar extension_name = XKit.installed.title(m_array[i]);\r\n\t\t\tvar extension_id = m_array[i];\r\n\r\n\t\t\tif (m_array[i].substring(0,5) === \"xkit_\") { continue; }\r\n\r\n\t\t\tm_html = m_html + \"<option value=\\\"\" + extension_id + \"\\\">\" + extension_name + \"</option>\";\r\n\r\n\t\t}\r\n\r\n\t\tm_html = m_html + \"</select>\";\r\n\r\n\t\t$(obj).html(m_html);\r\n\r\n\t},\r\n\r\n\tsettings_box_extension: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_array = XKit.installed.list();\r\n\r\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\r\n\r\n\t\tfor (var i=0;i<m_array.length;i++) {\r\n\r\n\t\t\tvar extension_name = XKit.installed.title(m_array[i]);\r\n\t\t\tvar extension_id = m_array[i];\r\n\r\n\t\t\tif (m_array[i].substring(0,5) === \"xkit_\") { continue; }\r\n\r\n\t\t\tm_html = m_html + \"<option value=\\\"\" + extension_id + \"\\\">\" + extension_name + \"</option>\";\r\n\r\n\t\t}\r\n\r\n\t\tm_html = m_html + \"</select>\";\r\n\r\n\t\t$(obj).html(m_html);\r\n\r\n\t},\r\n\r\n\tsettings_box_color: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_array = XKit.installed.list();\r\n\r\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\r\n\r\n\t\tm_html = m_html + \"<option value=\\\"#de4c4c\\\">Red</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#df982e\\\">Orange</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#fde72d\\\">Yellow</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#7bcf47\\\">Green</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#4cadde\\\">Blue</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#b94cde\\\">Purple</option>\";\r\n\r\n\t\tm_html = m_html + \"<option value=\\\"#838383\\\">Light Gray</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#d6d6d6\\\">Gray</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"#000\\\">Black</option>\";\r\n\r\n\t\tm_html = m_html + \"</select>\";\r\n\r\n\t\t$(obj).html(m_html);\r\n\r\n\t},\r\n\r\n\tsettings_box_post_type: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_array = XKit.installed.list();\r\n\r\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\r\n\r\n\t\tm_html = m_html + \"<option value=\\\"text\\\">Text</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"note\\\">Ask</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"photo\\\">Photo / Photoset</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"quote\\\">Quote</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"link\\\">Link</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"audio\\\">Audio</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"video\\\">Video</option>\";\r\n\r\n\t\tm_html = m_html + \"</select>\";\r\n\r\n\t\t$(obj).html(m_html);\r\n\r\n\t},\r\n\r\n\tsettings_box_day: function(obj, parent, real_val) {\r\n\r\n\t\tvar m_html = \"<select class=\\\"xkit-servant-option-listbox\\\">\";\r\n\r\n\t\tm_html = m_html + \"<option value=\\\"1\\\">Monday</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"2\\\">Tuesday</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"3\\\">Wednesday</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"4\\\">Thursday</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"5\\\">Friday</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"6\\\">Saturday</option>\";\r\n\t\tm_html = m_html + \"<option value=\\\"0\\\">Sunday</option>\";\r\n\r\n\t\tm_html = m_html + \"</select>\";\r\n\r\n\t\t$(obj).html(m_html);\r\n\r\n\t},\r\n\r\n\tcheck_js: function() {\r\n\r\n\t\tvar to_return = false;\r\n\r\n\t\t$(\".xkit-servant-cause-selector\").each(function() {\r\n\t\t\tif ($(this).val() === \"run_js\") {\r\n\t\t\t\tto_return = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-action-selector\").each(function() {\r\n\t\t\tif ($(this).val() === \"run_js\") {\r\n\t\t\t\tto_return = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn to_return;\r\n\r\n\t},\r\n\r\n\tcheck_compatibility: function() {\r\n\r\n\t\t// show xkit-servant-compatibility-error?\r\n\t\tvar m_compatibility_cause = \"\";\r\n\t\tvar m_compatibility_action = \"\";\r\n\r\n\t\t$(\".xkit-servant-cause-selector\").each(function() {\r\n\r\n\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\r\n\r\n\t\t\t\tif (m_compatibility_cause === \"\") {\r\n\t\t\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\r\n\t\t\t\t\t\tm_compatibility_cause = XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-action-selector\").each(function() {\r\n\r\n\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\r\n\r\n\t\t\t\tif (m_compatibility_action === \"\") {\r\n\t\t\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility') !== \"undefined\") {\r\n\t\t\t\t\t\tm_compatibility_action = XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-compatibility');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif (m_compatibility_action === \"\" &&m_compatibility_cause === \"\") { return false; }\r\n\t\tif (m_compatibility_action !==m_compatibility_cause && m_compatibility_action !== \"\") { return true; }\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\treact_to_selection_change: function(obj) {\r\n\r\n\t\tvar selector = \".xkit-servant-add-option\";\r\n\r\n\t\tif (typeof obj !== \"undefined\") { selector = obj; }\r\n\r\n\t\t$(selector).each(function() {\r\n\r\n\t\t\tvar settings_box = $(this).parent().find(\".xkit-servant-add-option-settings\");\r\n\t\t\tif ($(settings_box).parent().attr('data-last-id') === $(this).val()) { return; }\r\n\r\n\t\t\t$(settings_box).html(\"\");\r\n\r\n\t\t\t$(this).removeClass(\"xkit-servant-half-option\");\r\n\t\t\t$(this).removeClass(\"servant-contains-textarea\");\r\n\r\n\t\t\t$(settings_box).removeClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t$(settings_box).parent().attr('data-last-id', $(this).val());\r\n\r\n\t\t\t$(settings_box).parent().find(\".xkit-servant-help-for-line\").attr('title', XKit.extensions.servant.add_window_option_get_real_value($(settings_box).parent().find(\".xkit-servant-add-option\")).attr('data-description')).tipTip({ delay: 0, defaultPosition: \"right\", maxWidth: \"300px\" });\r\n\r\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"text\") {\r\n\r\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\r\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t\tXKit.extensions.servant.settings_box_text(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"textarea\") {\r\n\r\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\r\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t\tXKit.extensions.servant.settings_box_textarea(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"color\") {\r\n\r\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\r\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t\tXKit.extensions.servant.settings_box_color(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"post_type\") {\r\n\r\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\r\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t\tXKit.extensions.servant.settings_box_post_type(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"day\") {\r\n\r\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\r\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t\tXKit.extensions.servant.settings_box_day(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-type') === \"extension\") {\r\n\r\n\t\t\t\t$(this).addClass(\"xkit-servant-half-option\");\r\n\t\t\t\t$(settings_box).addClass(\"xkit-servant-options-shown\");\r\n\r\n\t\t\t\tXKit.extensions.servant.settings_box_extension(settings_box, this, XKit.extensions.servant.add_window_option_get_real_value($(this)));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-returns') !== \"undefined\" &&XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-returns') !== \"undefined\") {\r\n\r\n\t\t\t\tvar m_id = $(settings_box).parent().attr('data-id');\r\n\r\n\t\t\t\t$(settings_box).parent().find(\".xkit-servant-add-option-returns\").attr('title', \"<b>Returns:</b><br/>%\" + (parseInt(m_id) + 1) + \": \" + XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-returns')).tipTip({ delay: 0, defaultPosition: \"left\" });\r\n\r\n\t\t\t\t$(settings_box).parent().find(\".xkit-servant-help-for-line\").attr('title', XKit.extensions.servant.add_window_option_get_real_value($(this)).attr('data-description')).tipTip({ delay: 0, defaultPosition: \"right\", maxWidth: \"300px\" });\r\n\r\n\t\t\t\t$(settings_box).parent().addClass(\"xkit-servant-return-values-shown\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t$(settings_box).parent().removeClass(\"xkit-servant-return-values-shown\");\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tif (XKit.extensions.servant.check_js() === true) {\r\n\t\t\t$(\".xkit-servant-javascript-warning\").css(\"display\",\"block\");\r\n\t\t} else {\r\n\t\t\t$(\".xkit-servant-javascript-warning\").css(\"display\",\"none\");\r\n\t\t}\r\n\r\n\t\tif (XKit.extensions.servant.check_compatibility() === true) {\r\n\t\t\t$(\".xkit-servant-compatibility-error\").css(\"display\",\"block\");\r\n\t\t\t$(\"#xkit-servant-add\").addClass(\"disabled\");\r\n\t\t} else {\r\n\t\t\t$(\".xkit-servant-compatibility-error\").css(\"display\",\"none\");\r\n\t\t\t$(\"#xkit-servant-add\").removeClass(\"disabled\");\r\n\t\t}\r\n\r\n\t\tcenterIt($(\"#xkit-window\"));\r\n\r\n\t},\r\n\r\n\tbind_actions_on_add_window: function() {\r\n\r\n\t\t$(\".xkit-servant-add-delete-line\").unbind(\"click\");\r\n\t\t$(\".xkit-servant-add-delete-line\").bind(\"click\", function() {\r\n\r\n\t\t\tvar id = $(this).attr('data-id');\r\n\r\n\t\t\tif (id === \"0\") { return; }\r\n\r\n\t\t\t$(this).parent().fadeOut('fast', function(){ var m_obj = this; $(this).remove(); XKit.extensions.servant.readjust_lines($(m_obj)); centerIt($(\"#xkit-window\")); XKit.extensions.servant.react_to_selection_change(); });\r\n\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-add-option\").unbind(\"change\");\r\n\t\t$(\".xkit-servant-add-option\").bind(\"change\", function() {\r\n\r\n\t\t\tXKit.extensions.servant.react_to_selection_change();\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\treadjust_lines: function(obj) {\r\n\r\n\t\tvar line_obj = $(obj);\r\n\r\n\t\tvar selector = \"\";\r\n\r\n\t\tvar is_action = false;\r\n\r\n\t\tif ($(line_obj).hasClass(\"xkit-servant-option-line-cause\")) {\r\n\t\t\tselector = \".xkit-servant-option-line-cause\";\r\n\t\t} else{\r\n\t\t\tselector = \".xkit-servant-option-line-action\";\r\n\t\t\tis_action = true;\r\n\t\t}\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\t$(selector).each(function() {\r\n\r\n\t\t\t$(this).attr('data-id', index);\r\n\r\n\t\t\tfor (var i=0;i<10;i++) {\r\n\t\t\t\t$(this).removeClass(\"xkit-servant-option-action-line-\" + i);\r\n\t\t\t\t$(this).removeClass(\"xkit-servant-option-cause-line-\" + i);\r\n\t\t\t}\r\n\r\n\t\t\t$(this).find(\".xkit-servant-add-delete-line\").attr('data-id', index);\r\n\r\n\t\t\t$(this).find(\".xkit-servant-help-for-line\").attr('data-id', index);\r\n\r\n\t\t\tif (is_action) {\r\n\t\t\t\t$(this).addClass(\"xkit-servant-option-action-line-\" + index);\r\n\t\t\t\t$(this).find(\".xkit-servant-add-option-settings\").attr('id', \"servant-action-\" + index + \"-settings\");\r\n\t\t\t} else {\r\n\t\t\t\t$(this).addClass(\"xkit-servant-option-cause-line-\" + index);\r\n\t\t\t\t$(this).find(\".xkit-servant-add-option-settings\").attr('id', \"servant-cause-\" + index + \"-settings\");\r\n\t\t\t}\r\n\r\n\t\t\t$(this).find(\".xkit-servant-add-option\").attr(\"id\", \"servant-cause-\" + index);\r\n\r\n\t\t\t$(this).find(\".xkit-servant-add-option-returns\").attr('title', \"<b>Returns:</b><br/>%\" + (index + 1) + \": \" + XKit.extensions.servant.add_window_option_get_real_value($(this).find(\".xkit-servant-add-option\")).attr('data-returns')).tipTip({ delay: 0, defaultPosition: \"left\" });\r\n\r\n\t\t\t$(this).find(\".xkit-servant-help-for-line\").attr('title', XKit.extensions.servant.add_window_option_get_real_value($(this).find(\".xkit-servant-add-option\")).attr('data-description')).tipTip({ delay: 0, defaultPosition: \"right\", maxWidth: \"300px\" });\r\n\r\n\t\t\tindex++;\r\n\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tadd_field_cause: function() {\r\n\r\n\t\tvar m_html = \"<div data-id=\\\"\" + XKit.extensions.servant.add_cause_count + \"\\\" class=\\\"xkit-servant-option-line xkit-servant-option-line-cause xkit-servant-option-cause-line-\" + XKit.extensions.servant.add_action_count + \"\\\"><div data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-add-delete-line\\\">&nbsp;</div>\";\r\n\r\n\t\tm_html = m_html + \"<div data-section=\\\"cause\\\" data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-help-for-line\\\">&nbsp;</div>\";\r\n\r\n\t\tvar causes_html = \"\";\r\n\r\n\t\tif ($(\".xkit-servant-option-line-cause\").length >= 3) { alert(\"You can only add up to 3 causes.\"); return \"\"; }\r\n\r\n\t\tfor (var obj in XKit.extensions.servant.causes) {\r\n\r\n\t\t\tvar dis_class = \"\";\r\n\t\t\tvar m_text = XKit.extensions.servant.causes[obj].text;\r\n\t\t\tif (XKit.extensions.servant.causes[obj].type === \"separator\") {\r\n\t\t\t\tdis_class = \"disabled\";\r\n\t\t\t\tm_text = \" --- \" + m_text + \" --- \";\r\n\t\t\t}\r\n\t\t\tcauses_html = causes_html + \"<option data-description=\\\"\" + XKit.extensions.servant.causes[obj].description + \"\\\" data-returns=\\\"\" + XKit.extensions.servant.causes[obj].returns + \"\\\" data-placeholder=\\\"\" + XKit.extensions.servant.causes[obj].placeholder + \"\\\"  data-compatibility=\\\"\" + XKit.extensions.servant.causes[obj].compatibility + \"\\\" data-additional=\\\"\" + XKit.extensions.servant.causes[obj].additional + \"\\\" data-type=\\\"\" + XKit.extensions.servant.causes[obj].type  + \"\\\" \" + dis_class + \" value=\\\"\" + obj + \"\\\">\" + m_text + \"</option>\";\r\n\r\n\t\t}\r\n\r\n\t\tm_html = m_html + \"<select class=\\\"xkit-servant-add-option xkit-servant-cause-selector\\\" id=\\\"servant-cause-\" + XKit.extensions.servant.add_cause_count + \"\\\">\" + causes_html + \"</select>\";\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-option-settings\\\" id=\\\"servant-cause-\" + XKit.extensions.servant.add_cause_count + \"-settings\\\">&nbsp;</div>\";\r\n\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-option-returns\\\">&nbsp;</div>\";\r\n\t\tm_html = m_html + \"</div>\";\r\n\r\n\t\tXKit.extensions.servant.add_cause_count++;\r\n\t\treturn m_html;\r\n\r\n\t},\r\n\r\n\tadd_field_action: function() {\r\n\r\n\t\tvar m_html = \"<div class=\\\"xkit-servant-option-line xkit-servant-option-line-action xkit-servant-option-action-line-\" + XKit.extensions.servant.add_action_count + \"\\\"><div data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-add-delete-line\\\">&nbsp;</div>\";\r\n\t\tvar causes_html = \"\";\r\n\r\n\t\tm_html = m_html + \"<div data-section=\\\"action\\\" data-id=\\\"\" + XKit.extensions.servant.add_action_count + \"\\\" class=\\\"xkit-servant-help-for-line\\\">&nbsp;</div>\";\r\n\r\n\t\tif ($(\".xkit-servant-option-line-action\").length >= 5) { alert(\"You can only add up to 5 actions.\"); return \"\"; }\r\n\r\n\t\tfor (var obj in XKit.extensions.servant.actions) {\r\n\r\n\t\t\tvar dis_class = \"\";\r\n\t\t\tvar m_text = XKit.extensions.servant.actions[obj].text;\r\n\t\t\tif (XKit.extensions.servant.actions[obj].type === \"separator\") {\r\n\t\t\t\tdis_class = \"disabled\";\r\n\t\t\t\tm_text = \" --- \" + m_text + \" --- \";\r\n\t\t\t}\r\n\t\t\tcauses_html = causes_html + \"<option data-description=\\\"\" + XKit.extensions.servant.actions[obj].description + \"\\\" data-placeholder=\\\"\" + XKit.extensions.servant.actions[obj].placeholder + \"\\\" data-compatibility=\\\"\" + XKit.extensions.servant.actions[obj].compatibility + \"\\\" data-additional=\\\"\" + XKit.extensions.servant.actions[obj].additional + \"\\\" data-type=\\\"\" + XKit.extensions.servant.actions[obj].type  + \"\\\" \" + dis_class + \" value=\\\"\" + obj + \"\\\">\" + m_text + \"</option>\";\r\n\r\n\t\t}\r\n\r\n\t\tm_html = m_html + \"<select class=\\\"xkit-servant-add-option xkit-servant-action-selector\\\" id=\\\"servant-action-\" + XKit.extensions.servant.add_action_count + \"\\\">\" + causes_html + \"</select>\";\r\n\r\n\t\tm_html = m_html + \"<div class=\\\"xkit-servant-add-option-settings\\\" id=\\\"servant-action-\" + XKit.extensions.servant.add_action_count + \"-settings\\\">&nbsp;</div>\";\r\n\r\n\t\tm_html = m_html + \"</div>\";\r\n\r\n\r\n\t\tXKit.extensions.servant.add_action_count++;\r\n\t\treturn m_html;\r\n\r\n\t},\r\n\r\n\tcontrol_panel_div: \"\",\r\n\tservant_count_for_list: 1,\r\n\r\n\tcreate_cpanel_div: function(obj) {\r\n\r\n\t\tvar m_title = obj.title;\r\n\r\n\t\tif (typeof obj.title == \"undefined\" || obj.title == \"\") {\r\n\t\t\tm_title = \"Servant #\" + XKit.extensions.servant.servant_count_for_list;\r\n\t\t}\r\n\r\n\t\tvar m_description = \"When \";\r\n\r\n\t\tvar m_action = \"\";\r\n\t\tif (obj.actions.length > 1) {\r\n\t\t\tfor (var i=0;i<obj.actions.length;i++) {\r\n\t\t\t\tm_val = \"\";\r\n\t\t\t\tm_action = m_action + XKit.extensions.servant.actions[obj.actions[i].id].text.toLowerCase();\r\n\t\t\t\tif (i < obj.actions.length - 1) {\r\n\t\t\t\t\tm_action = m_action + \" and \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tm_action = XKit.extensions.servant.actions[obj.actions[0].id].text.toLowerCase();\r\n\t\t}\r\n\r\n\t\tif (obj.causes.length > 1) {\r\n\t\t\tfor (var i=0;i<obj.causes.length;i++) {\r\n\t\t\t\tm_val = \"\";\r\n\t\t\t\tif (typeof obj.causes[i].value !== \"undefined\" &&obj.causes[i].value !== \"\") {\r\n\t\t\t\t\tm_val = \" \" + obj.causes[i].value;\r\n\t\t\t\t}\r\n\t\t\t\tm_description = m_description + XKit.extensions.servant.causes[obj.causes[i].id].text + m_val;\r\n\t\t\t\tif (i < obj.causes.length - 1) {\r\n\t\t\t\t\tm_description = m_description + \" and \";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tm_description = m_description + \", \" + m_action;\r\n\t\t} else {\r\n\t\t\tm_val = \"\";\r\n\t\t\tif (typeof obj.causes[0].value !== \"undefined\" &&obj.causes[0].value !== \"\") {\r\n\t\t\t\tm_val = \" \" + obj.causes[0].value;\r\n\t\t\t}\r\n\t\t\tm_description = m_description + XKit.extensions.servant.causes[obj.causes[0].id].text + m_val + \", \" + m_action;\r\n\t\t}\r\n\r\n\t\tm_description = m_description + \". \";\r\n\r\n\t\treturn\t\"<div class=\\\"xkit-servant-list-item\\\" data-servant-id=\\\"\" + obj.id + \"\\\">\" +\r\n\t\t\t\t\"<div class=\\\"m-title\\\">\" + m_title + \"</div>\" +\r\n\t\t\t\t\"<div class=\\\"m-description\\\">\" + m_description + \"</div>\" +\r\n\t\t\t\t\"<div data-servant-id=\\\"\" + obj.id + \"\\\" class=\\\"xkit-servant-item-delete\\\">&nbsp;</div>\" +\r\n\t\t\t\"</div>\";\r\n\t},\r\n\r\n\tcpanel: function(m_div) {\r\n\r\n\t\tXKit.extensions.servant.control_panel_div = m_div;\r\n\r\n\t\t$(\"#xkit-servant-cp\").remove();\r\n\r\n\t\tXKit.extensions.servant.load_servants();\r\n\r\n\t\tvar servant_html = \"\";\r\n\r\n\t\tif (XKit.extensions.servant.servants.length === 0) {\r\n\r\n\t\t\tservant_html = \"<div id=\\\"servant-list-no-servants\\\">You have no servants.<br/>You can add one by clicking the button above.</div>\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tXKit.extensions.servant.servant_count_for_list = 1;\r\n\r\n\t\t\tfor (var i=0;i<XKit.extensions.servant.servants.length;i++) {\r\n\r\n\t\t\t\tservant_html = servant_html + \tXKit.extensions.servant.create_cpanel_div(XKit.extensions.servant.servants[i]);\r\n\t\t\t\tXKit.extensions.servant.servant_count_for_list++;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar m_html = \t\"<div id=\\\"xkit-servant-cp\\\">\" +\r\n\t\t\t\t\t\"<div id=\\\"servant-toolbar\\\">\" +\r\n\t\t\t\t\t\t\"<div id=\\\"servant-add-button\\\" class=\\\"xkit-button\\\">Add new servant..</div>\" +\r\n\t\t\t\t\t\t\"<div id=\\\"servant-refresh-warning\\\">You need to refresh the page for changes to take affect</div>\" +\r\n\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\t\"<div id=\\\"servant-list\\\">\" +\r\n\t\t\t\t\t\tservant_html +\r\n\t\t\t\t\t\"</div>\" +\r\n\t\t\t\t\"</div>\";\r\n\r\n\r\n\t\t$(m_div).append(m_html);\r\n\r\n\t\t$(\"#servant-add-button\").click(function() {\r\n\r\n\t\t\tXKit.extensions.servant.show_add(m_div);\r\n\r\n\t\t});\r\n\r\n\t\t$(\".xkit-servant-item-delete\").click(function() {\r\n\r\n\t\t\tvar m_id = $(this).attr('data-servant-id');\r\n\t\t\tXKit.extensions.servant.delete_servant(m_id);\r\n\t\t\t$(this).parent().slideUp('fast', function() {\r\n\r\n\t\t\t\t$(this).remove();\r\n\r\n\t\t\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\r\n\r\n\t\t\t\tif (XKit.extensions.servant.servants.length === 0) {\r\n\t\t\t\t\tXKit.extensions.servant.cpanel(XKit.extensions.servant.control_panel_div);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tXKit.extensions.xkit_preferences.restart_extension(\"servant\");\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller();\r\n\t\t$(\"#xkit-extensions-panel-right\").nanoScroller({ scroll: 'top' });\r\n\r\n\t},\r\n\r\n\tdelete_servant: function(id) {\r\n\r\n\t\tXKit.extensions.servant.load_servants();\r\n\r\n\t\tfor (var i=0;i<XKit.extensions.servant.servants.length;i++) {\r\n\r\n\t\t\tif (XKit.extensions.servant.servants[i].id === id) {\r\n\r\n\t\t\t\tXKit.extensions.servant.servants.splice(i,1);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tXKit.extensions.servant.save_servants();\r\n\r\n\t},\r\n\r\n\tdestroy: function() {\r\n\t\tthis.running = false;\r\n\t}\r\n\r\n});","icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzdGMTE3NDA3MjA2ODExODA4MzkyMjM2MzU5MTQ4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NTkwODBENDRFNDgxMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NTkwODBEMzRFNDgxMUUzQTZERkRFMDgxOTFGQ0Q4MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxODAxMTc0MDcyMDY4MTFBRTczREVDNEM5OEM0RTE5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3N0YxMTc0MDcyMDY4MTE4MDgzOTIyMzYzNTkxNDg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mn9SrQAABKhJREFUeNrsWk2IHEUUfq+qu2d2w6zubIKSgwRj0AUPIiSCZyXoyVMOelDwFs8iqHc9ePEQEE+elJBDSAKBRfDi1V+MgSAYWF3zY0hmnd3Nzkx3PWtmZ2Znuqtrqqqr2WlIMzRD9+tX79X7+97rxhM/dKHKR4BQ7YNVXP7qWyAAIAAcnLPH5HUcUYKWWMMKZnGYXFFPNmkB1NBR5r+Go56AVDydyR7FwDwpcHAaNEJ4ucHX7idVTaOxgA+OsteavKALHZgJaBCpnz7Fb/folza5McHnf/YPJRoBfX4sXOCzrX+8jjWEf2N664/erQ7OiwLNCL5bDbmNPD9t09mb8XbsEsTkXQFE7BAs2ijw4iF8Y4V9fTdxiIG5ONY7sNYS6BLEJeShFMu7PdroKnIFY/BcHSOEhODjjfhBTA7CBGXk0VRtudIS524rfCNkcPFEdDSCr+4l17aFmyTShWgaaZEW0oEBCCOcQn59g6AKosksdYjTrzvw5Z0YjRChQpiA4UwIZRLlUxzY9CNyBYYKVjXE9S58+FdPpAnIYKEyoYSUZpHt840YKleRHv/JP7EsAkVkwFPXdr0rUGPw6hLnA7mkIjd2xfUdUVL6wpd+3zV08zlFoxyqfcg0WjQIQuxDGpskS/djuOMJwXgI4ici/OKYHfK53BKf3Yo9WcBHFhKDpG6bqeZFAYYuCcCbAmhdetOzFqeWiHD2iAVMhjdKLEQ5NRAHq6ZnLQ4K4BDwkXKJ0UJGwxsLOJ3HlGWuS3S53qVktFHLHFam10FQK43DHbGwScALw1GW4dAW9P7fvR0xlONMM3hnhafgKme+gtg3+p/c5jyPRH/jEJmFsLAClGUhy8KYM1cq4AlFemgplQmxS/sWiElnn4N3oawoi4jvHeG9UcI4XmclupCHIM5oEDF4ZYnrdZ6jIEZ7b5ZPeAzioiy4k9d5hBJilAyFXe7p0/fPDrs5KGRCz9Zg9WFDw2YldH0BYHIPQsvtlFHNc5djZsKwcT9QtJfcFnD+QWzlSDe74GukGfDCvviQ4Op/1jNN7i8GKt4T8xI0kO50eNCr7iF36WNtUdbQo1AdaHBsJ6S8/tGTYX1UH9baycVWPHcWOLkQPB7Qt+1EaYEIccw59Ofxahzg8GsGeKbJGKrvsn6Sp8m077aKyS/g6NIQvt0MGwx3BSgf79BUD9BHPqW9zXXJQq8v8Wdr/edeWGDLKueoMQgmQCoWAM8zZ57SAmRDD09H7PQIaa7W2WrdSAg+HOLvTTGA3Iex2fcDinu6aceby4ED5GBT0wR0miQppcI8NEqZIczw/GeXDlv6HQ7bS1KOlYw3O7W5e3cpFcSY82f/fGkzbvLwmdrQJ8jMvwcuhKoeDi27vbRU1v4gUeyFzfjsSvAYx++3kh8fipmDrR0hyvskw6USbyX0TSt5t8m3BN2LySQcy1TAKcNt9MSlTaijt8bqAFrK3zoCYB4UqDqcrrwCXJ2hDWuz5llUlRS3iqv7lFM29dnX9Jh5d4/Gn0uOiSmHAC1f/UP+xwc0DmKNupgjn1JK0GAQV03y7IwjBRTq6qUhAynBco8NKRVyBgyr3db/L8AA9YdwpolZBTYAAAAASUVORK5CYII=","css":"#servant-toolbar {\r\n\tbackground: rgb(245,245,245);\r\n\tpadding: 3px 15px;\r\n\tborder-bottom: 1px solid rgb(190,190,190);\r\n\tposition: relative;\r\n}\r\n\r\n.xkit-servant-dimmed { opacity: 0.33; }\r\n.xkit-servant-dimmed.xkit-servant-dimmed-but-active { opacity: 1; }\r\n\r\n.xkit-servant-rubber-band {\r\n\r\n\tposition: absolute;\r\n\ttop: 0; left: 0;\r\n\twidth: 100%; height: 6px;\r\n\tz-index: 9;\r\n\tborder-radius: 6px 6px 0px 0px;\r\n\r\n}\r\n\r\n.post_full .post_permalink { z-index: 10; }\r\n\r\n#servant-refresh-warning {\r\n\tfont-size: 12px;\r\n\tposition: absolute;\r\n\ttop: 11px;\r\n\tright: 20px;\r\n\tline-height: 20px;\r\n\theight: 20px;\r\n\tcolor: rgb(120,120,120);\r\n\tbackground: no-repeat 0px 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAXUlEQVQYV3XQwQ0AIQgEQGjhquXh0wfV2oIXLlkDi+dPMi6ICh0z2+6uXC+FQGM+MscSxgcCIYlxgwFuqR/MaYBRz6kN5k8UeJstWvOsypDXgtTTmgHuWFNb7N+DF+nsQgtDvJ+YAAAAAElFTkSuQmCC');\r\n\tpadding-left: 15px;\r\n}\r\n\r\n.xkit-servant-list-item .m-title { font-weight: bold; }\r\n.xkit-servant-list-item .m-description {\r\n\r\n\tcolor: rgb(120,120,120); font-size: 12px;\r\n\tmax-width: 490px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n\r\n}\r\n\r\n#servant-list-no-servants {\r\n\r\n\ttext-align: center;\r\n\tpadding-top: 42px;\r\n\tfont-size: 13px;\r\n\tcolor: rgb(130,130,130);\r\n\r\n}\r\n\r\n.xkit-servant-list-item:last-child { border-bottom: 0; }\r\n\r\n.xkit-servant-list-item {\r\n\r\n\theight: 35px;\r\n\tline-height: 18px;\r\n\tpadding-left: 27px;\r\n\tborder-bottom: 1px solid rgb(220,220,220);\r\n\tfont-size: 13px;\r\n\tcolor: rgb(80,80,80);\r\n\tposition: relative;\r\n\tpadding-top: 10px;\r\n\tpadding-bottom: 10px;\r\n\r\n}\r\n\r\n.xkit-servant-item-delete {\r\n\r\n\tposition: absolute;\r\n\tleft: 7px;\r\n\ttop: 15px;\r\n\tbackground: no-repeat 50% 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAALElEQVQIW2NkwAMYQXIXOTj+g2j9Hz9Q+GAOsgIYH6QQLonNBMI6CdqJzdEAOZQXyGBIAx8AAAAASUVORK5CYII=');\r\n\theight: 25px;\r\n\twidth: 13px;\r\n\topacity: 0.45;\r\n\tcursor: pointer;\r\n\tz-index: 100;\r\n\r\n}\r\n\r\n.xkit-servant-item-delete:hover { opacity: 0.8; }\r\n\r\n.xkit-servant-add-division {\r\n\r\n\tposition: relative;\r\n\tborder-top: 1px solid rgb(200,200,200);\r\n\tpadding: 5px;\r\n\tpadding-left: 100px;\r\n\tmargin-top: 5px;\r\n\r\n}\r\n\r\n.xkit-servant-silent-division {\r\n\r\n\tmargin-top: 5px;\r\n\tmargin-bottom: 10px;\r\n\tborder-top: 1px solid rgb(200,200,200);\r\n\theight: 0;\r\n\r\n}\r\n\r\n.xkit-servant-help-for-line {\r\n\r\n\tposition: absolute;\r\n\tleft: -25px;\r\n\tbackground: no-repeat 50% 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAOElEQVQYV2NkwAT/oUKMyFIoHKgE0QqxWMLAgG4izDSQYrxWE60QZBLRbqSeQmT3YQQhss/wKgQA9VMJCzEArKMAAAAASUVORK5CYII=');\r\n\twidth: 20px;\r\n\theight: 23px;\r\n\ttop: 2px;\r\n\tborder-radius: 3px;\r\n\topacity: 0.40;\r\n\tcursor: pointer;\r\n\r\n}\r\n\r\n.xkit-servant-help-for-line:hover {\r\n\r\n\topacity: 0.55;\r\n\r\n}\r\n\r\n.xkit-servant-add-delete-line {\r\n\r\n\tposition: absolute;\r\n\tleft: -43px;\r\n\tbackground: red no-repeat 50% 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAG0lEQVQIW2NkwAMYKZP8DwToJjCCAGXG4tINALm2BAjkSSkMAAAAAElFTkSuQmCC');\r\n\twidth: 15px;\r\n\theight: 15px;\r\n\ttop: 6px;\r\n\tborder-radius: 60px;\r\n\topacity: 0.40;\r\n\tcursor: pointer;\r\n\r\n}\r\n\r\n.xkit-servant-option-listbox {\r\n\r\n\tmargin-top: 0px !important;\r\n\tmargin-bottom: 0px;\r\n\theight: 25px;\r\n\tfont-size: 13px;\r\n\twidth: 100%;\r\n\r\n}\r\n\r\n.xkit-servant-add-delete-line:hover {\r\n\r\n\topacity: 0.55;\r\n\r\n}\r\n\r\n.xkit-servant-option-action-line-0 .xkit-servant-add-delete-line,\r\n.xkit-servant-option-cause-line-0 .xkit-servant-add-delete-line { display: none; }\r\n\r\n.xkit-servant-javascript-warning {\r\n\tbackground: rgb(250,190,190);\r\n\tpadding: 5px 10px;\r\n\tborder: 1px solid rgba(0,0,0,0.22);\r\n\tfont-size: 12px;\r\n\tborder-radius: 4px;\r\n\tmargin-top: 11px;\r\n\tline-height: 17px;\r\n\tdisplay: none;\r\n}\r\n.xkit-servant-compatibility-error {\r\n\tbackground: rgb(250,190,190);\r\n\tpadding: 5px 10px;\r\n\tborder: 1px solid rgba(0,0,0,0.22);\r\n\tfont-size: 12px;\r\n\tborder-radius: 4px;\r\n\tmargin-top: 11px;\r\n\tline-height: 17px;\r\n\tdisplay: none;\r\n}\r\n\r\n.xkit-servant-option-textareabox {\r\n\r\n\theight: 57px;\r\n\twidth: 288px;\r\n\tresize: none;\r\n\tfont: normal 11px courier, monospace;\r\n\r\n}\r\n\r\n.xkit-servant-option-line {\r\n\r\n\tposition: relative;\r\n\tmargin-top: 5px;\r\n\tmin-height: 25px;\r\n\r\n}\r\n\r\n.xkit-servant-option-line.servant-contains-textarea {\r\n\r\n\theight: 74px;\r\n\r\n}\r\n\r\n.xkit-servant-division-title {\r\n\r\n\tposition: absolute;\r\n\ttop: 12px;\r\n\tcolor: rgb(100,100,100);\r\n\tfont-weight: bold;\r\n\tleft: 0px;\r\n\r\n}\r\n\r\n.xkit-servant-add-option-settings {\r\n\r\n\tposition: absolute;\r\n\tleft: 161px;\r\n\ttop: 1px;\r\n\twidth: 303px;\r\n\tdisplay: none;\r\n\theight: 26px;\r\n\r\n}\r\n\r\n.xkit-servant-add-option-settings.xkit-servant-return-values-shown .xkit-servant-option-textbox {\r\n\r\n\tpadding-right: 30px !important;\r\n\r\n}\r\n\r\n.xkit-servant-add-option-returns {\r\n\r\n\ttop: 2px; right: 0px;\r\n\theight: 23px;\r\n\twidth: 23px;\r\n\tbackground: white no-repeat 50% 50% url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAVklEQVQYV2NkQAXGQO4ZIGZEE0cRgClCV2MCFDiLrhPdRDgfwwp044D8/yCnkKQQpAOf2+EmghlIKpH5KG7EptAXqDEdiH2AGO5rfCbCLQJZSciNYMUAyEgTC/zM8RoAAAAASUVORK5CYII=);\r\n\t/*width: 20px; height: 19px;*/\r\n\tposition: absolute;\r\n\t/*top: 4px; right: 1px;*/\r\n\topacity: 0.45;\r\n\tcursor: pointer;\r\n\tdisplay: none;\r\n\r\n}\r\n\r\n.xkit-servant-option-line.xkit-servant-return-values-shown .xkit-servant-add-option-returns {\r\n\tdisplay: block;\r\n}\r\n\r\n.xkit-servant-option-line.xkit-servant-return-values-shown .xkit-servant-add-option-settings {\r\n\twidth: 269px;\r\n}\r\n\r\n.xkit-servant-option-line.xkit-servant-return-values-shown .xkit-servant-add-option {\r\n\r\n\twidth: 428px;\r\n\r\n}\r\n\r\n.xkit-servant-add-option-returns:hover {\r\n\r\n\topacity: 0.7;\r\n\r\n}\r\n\r\n.xkit-servant-add-option-returns:active {\r\n\r\n\topacity: 1;\r\n\ttop: 3px;\r\n\theight: 22px;\r\n\r\n}\r\n\r\n.xkit-servant-option-textbox {\r\n\r\n\tmargin-top: 0px !important;\r\n\tmargin-bottom: 0px;\r\n\theight: 25px;\r\n\tfont-size: 13px;\r\n\twidth: 153px;\r\n\r\n}\r\n\r\n.xkit-servant-add-option-settings.xkit-servant-options-shown {\r\n\r\n\tdisplay: block;\r\n\r\n}\r\n\r\n.xkit-servant-add-option {\r\n\r\n\tposition: absolute;\r\n\ttop: 1px;\r\n\tleft: 1px;\r\n\twidth: 464px;\r\n\theight: 25px;\r\n\r\n}\r\n\r\n.xkit-servant-add-option.xkit-servant-half-option {\r\n\r\n\twidth: 153px !important;\r\n\r\n}\r\n\r\n.xkit-servant-add-more {\r\n\r\n\tbackground: no-repeat 5px 50% url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAJElEQVQIW2NkQID/QCYjjAtnAAUwJEAC6IARrw6Yapx2oBgHAMKOBQfOt/0mAAAAAElFTkSuQmCC');\r\n\tpadding: 1px 10px 1px 14px;\r\n\tcolor: black;\r\n\tfont-size: 12px;\r\n\tcursor: pointer;\r\n\topacity: 0.54;\r\n\tdisplay: inline-block;\r\n\tmargin-top: 6px;\r\n\r\n}\r\n\r\n.xkit-servant-add-more:hover {\r\n\r\n\topacity: 0.77;\r\n\r\n}","title":"Servant","description":"XKit Personal Assistant","developer":"STUDIOXENIX","version":"0.4 REV E","frame":"false","beta":"false","slow":"true","details":"Automator for XKit: lets you create little Servants that does tasks for you when the conditions you've set are met.","file":"found","server":"up","errors":false}